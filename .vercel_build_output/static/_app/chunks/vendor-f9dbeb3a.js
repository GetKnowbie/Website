function e(){}function t(e,t){for(const r in t)e[r]=t[r];return e}function r(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(r)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,...r){if(null==t)return e;const n=t.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}function u(e,t,r){e.$$.on_destroy.push(a(t,r))}function f(e,t,r,n){if(e){const i=c(e,t,r,n);return e[0](i)}}function c(e,r,n,i){return e[1]&&i?t(n.ctx.slice(),e[1](i(r))):n.ctx}function h(e,t,r,n,i,o,s){const a=function(e,t,r,n){if(e[2]&&n){const i=e[2](n(r));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],r=Math.max(t.dirty.length,i.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|i[n];return e}return t.dirty|i}return t.dirty}(t,n,i,o);if(a){const i=c(t,r,n,s);e.p(i,a)}}function l(e,t){e.appendChild(t)}function p(e,t,r){e.insertBefore(t,r||null)}function d(e){e.parentNode.removeChild(e)}function y(e){return document.createElement(e)}function g(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function b(e){return document.createTextNode(e)}function _(){return b(" ")}function m(){return b("")}function w(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function v(e){return function(t){return t.preventDefault(),e.call(this,t)}}function O(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function S(e){return Array.from(e.childNodes)}function B(e,t,r,n){for(let i=0;i<e.length;i+=1){const n=e[i];if(n.nodeName===t){let t=0;const o=[];for(;t<n.attributes.length;){const e=n.attributes[t++];r[e.name]||o.push(e.name)}for(let e=0;e<o.length;e++)n.removeAttribute(o[e]);return e.splice(i,1)[0]}}return n?g(t):y(t)}function N(e,t){for(let r=0;r<e.length;r+=1){const n=e[r];if(3===n.nodeType)return n.data=""+t,e.splice(r,1)[0]}return b(t)}function A(e){return N(e," ")}function E(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function T(e,t){e.value=null==t?"":t}function I(e,t,r){e.classList[r?"add":"remove"](t)}let D;function x(e){D=e}function U(){if(!D)throw new Error("Function called outside component initialization");return D}function R(e){U().$$.on_mount.push(e)}function j(e){U().$$.after_update.push(e)}function L(e,t){U().$$.context.set(e,t)}const P=[],M=[],k=[],$=[],C=Promise.resolve();let Y=!1;function J(e){k.push(e)}let F=!1;const z=new Set;function W(){if(!F){F=!0;do{for(let e=0;e<P.length;e+=1){const t=P[e];x(t),V(t.$$)}for(x(null),P.length=0;M.length;)M.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];z.has(t)||(z.add(t),t())}k.length=0}while(P.length);for(;$.length;)$.pop()();Y=!1,F=!1,z.clear()}}function V(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}const K=new Set;let H;function q(){H={r:0,c:[],p:H}}function X(){H.r||i(H.c),H=H.p}function G(e,t){e&&e.i&&(K.delete(e),e.i(t))}function Z(e,t,r,n){if(e&&e.o){if(K.has(e))return;K.add(e),H.c.push((()=>{K.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}function Q(e,t){const r={},n={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(n[e]=1);for(const e in a)i[e]||(r[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const s in n)s in r||(r[s]=void 0);return r}function ee(e){return"object"==typeof e&&null!==e?e:{}}function te(e){e&&e.c()}function re(e,t){e&&e.l(t)}function ne(e,t,n,s){const{fragment:a,on_mount:u,on_destroy:f,after_update:c}=e.$$;a&&a.m(t,n),s||J((()=>{const t=u.map(r).filter(o);f?f.push(...t):i(t),e.$$.on_mount=[]})),c.forEach(J)}function ie(e,t){const r=e.$$;null!==r.fragment&&(i(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function oe(e,t){-1===e.$$.dirty[0]&&(P.push(e),Y||(Y=!0,C.then(W)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(t,r,o,s,a,u,f=[-1]){const c=D;x(t);const h=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:r.context||[]),callbacks:n(),dirty:f,skip_bound:!1};let l=!1;if(h.ctx=o?o(t,r.props||{},((e,r,...n)=>{const i=n.length?n[0]:r;return h.ctx&&a(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),l&&oe(t,e)),r})):[],h.update(),l=!0,i(h.before_update),h.fragment=!!s&&s(h.ctx),r.target){if(r.hydrate){const e=S(r.target);h.fragment&&h.fragment.l(e),e.forEach(d)}else h.fragment&&h.fragment.c();r.intro&&G(t.$$.fragment),ne(t,r.target,r.anchor,r.customElement),W()}x(c)}class ae{$destroy(){ie(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ue=[];function fe(t,r=e){let n;const i=[];function o(e){if(s(t,e)&&(t=e,n)){const e=!ue.length;for(let r=0;r<i.length;r+=1){const e=i[r];e[1](),ue.push(e,t)}if(e){for(let e=0;e<ue.length;e+=2)ue[e][0](ue[e+1]);ue.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=e){const u=[s,a];return i.push(u),1===i.length&&(n=r(o)||e),s(t),()=>{const e=i.indexOf(u);-1!==e&&i.splice(e,1),0===i.length&&(n(),n=null)}}}}function ce(t,r,n){const s=!Array.isArray(t),u=s?[t]:t,f=r.length<2;return{subscribe:fe(n,(t=>{let n=!1;const c=[];let h=0,l=e;const p=()=>{if(h)return;l();const n=r(s?c[0]:c,t);f?t(n):l=o(n)?n:e},d=u.map(((e,t)=>a(e,(e=>{c[t]=e,h&=~(1<<t),n&&p()}),(()=>{h|=1<<t}))));return n=!0,p(),function(){i(d),l()}})).subscribe}}var he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pe(e,t){return e(t={exports:{}},t.exports),t.exports}for(var de=function(e){var t=Se(e),r=t[0],n=t[1];return 3*(r+n)/4-n},ye=function(e){var t,r,n=Se(e),i=n[0],o=n[1],s=new me(function(e,t,r){return 3*(t+r)/4-r}(0,i,o)),a=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)t=_e[e.charCodeAt(r)]<<18|_e[e.charCodeAt(r+1)]<<12|_e[e.charCodeAt(r+2)]<<6|_e[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;2===o&&(t=_e[e.charCodeAt(r)]<<2|_e[e.charCodeAt(r+1)]>>4,s[a++]=255&t);1===o&&(t=_e[e.charCodeAt(r)]<<10|_e[e.charCodeAt(r+1)]<<4|_e[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t);return s},ge=function(e){for(var t,r=e.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Be(e,s,s+o>a?a:s+o));1===n?(t=e[r-1],i.push(be[t>>2]+be[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(be[t>>10]+be[t>>4&63]+be[t<<2&63]+"="));return i.join("")},be=[],_e=[],me="undefined"!=typeof Uint8Array?Uint8Array:Array,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ve=0,Oe=we.length;ve<Oe;++ve)be[ve]=we[ve],_e[we.charCodeAt(ve)]=ve;function Se(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function Be(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(be[(i=n)>>18&63]+be[i>>12&63]+be[i>>6&63]+be[63&i]);return o.join("")}_e["-".charCodeAt(0)]=62,_e["_".charCodeAt(0)]=63;var Ne={byteLength:de,toByteArray:ye,fromByteArray:ge},Ae=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=e[t+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=l,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},Ee=function(e,t,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;e[r+p]=255&s,p+=d,s/=256,f-=8);e[r+p-d]|=128*y},Te=pe((function(e,t){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;var n=2147483647;function i(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|l(e,t),n=i(r),s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(k(e,Uint8Array)){var t=new Uint8Array(e);return c(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(e));if(k(e,ArrayBuffer)||e&&k(e.buffer,ArrayBuffer))return c(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(k(e,SharedArrayBuffer)||e&&k(e.buffer,SharedArrayBuffer)))return c(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var s=function(e){if(o.isBuffer(e)){var t=0|h(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||$(e.length)?i(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(e))}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return a(e),i(e<0?0:0|h(e))}function f(e){for(var t=e.length<0?0:0|h(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function h(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function l(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(e));var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(e).length;default:if(i)return n?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function f(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<a;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,l=0;l<u;l++)if(f(e,o+l)!==f(t,l)){h=!1;break}if(h)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if($(a))return s;e[r+s]=a}return s}function _(e,t,r,n){return M(L(t,e.length-r),e,r,n)}function m(e,t,r,n){return M(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return M(P(t),e,r,n)}function v(e,t,r,n){return M(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?Ne.fromByteArray(e):Ne.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,f=e[i],c=null,h=f>239?4:f>223?3:f>191?2:1;if(i+h<=r)switch(h){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&f)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=B));return r}(n)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return a(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(k(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(e));if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),u=Math.min(s,a),f=this.slice(n,i),c=e.slice(t,r),h=0;h<u;++h)if(f[h]!==c[h]){s=f[h],a=c[h];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return m(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function E(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=C[e[o]];return i}function T(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function x(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return t=+t,r>>>=0,i||x(e,0,r,4),Ee(e,t,r,n,23,4),r+4}function R(e,t,r,n,i){return t=+t,r>>>=0,i||x(e,0,r,8),Ee(e,t,r,n,52,8),r+8}o.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),Ae(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),Ae(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),Ae(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),Ae(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return R(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return R(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,n),u=a.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var j=/[^+/0-9A-Za-z-_]/g;function L(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function P(e){return Ne.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}var C=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()}));
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Te.Buffer,Te.SlowBuffer,Te.INSPECT_MAX_BYTES,Te.kMaxLength;var Ie={},De="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},xe=/%[sdj%]/g;function Ue(e){if(!We(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Le(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(xe,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])Fe(s)||!He(s)?o+=" "+s:o+=" "+Le(s);return o}var Re,je={};function Le(e,t){var r={seen:[],stylize:Me};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Je(t)?r.showHidden=t:t&&rt(r,t),Ve(r.showHidden)&&(r.showHidden=!1),Ve(r.depth)&&(r.depth=2),Ve(r.colors)&&(r.colors=!1),Ve(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Pe),ke(r,e,r.depth)}function Pe(e,t){var r=Le.styles[t];return r?"["+Le.colors[r][0]+"m"+e+"["+Le.colors[r][1]+"m":e}function Me(e,t){return e}function ke(e,t,r){if(e.customInspect&&t&&Ge(t.inspect)&&t.inspect!==Le&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return We(n)||(n=ke(e,n,r)),n}var i=function(e,t){if(Ve(t))return e.stylize("undefined","undefined");if(We(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(ze(t))return e.stylize(""+t,"number");if(Je(t))return e.stylize(""+t,"boolean");if(Fe(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Xe(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return $e(t);if(0===o.length){if(Ge(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Ke(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(qe(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Xe(t))return $e(t)}var u,f="",c=!1,h=["{","}"];(Ye(t)&&(c=!0,h=["[","]"]),Ge(t))&&(f=" [Function"+(t.name?": "+t.name:"")+"]");return Ke(t)&&(f=" "+RegExp.prototype.toString.call(t)),qe(t)&&(f=" "+Date.prototype.toUTCString.call(t)),Xe(t)&&(f=" "+$e(t)),0!==o.length||c&&0!=t.length?r<0?Ke(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=c?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)nt(t,String(s))?o.push(Ce(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Ce(e,t,r,n,i,!0))})),o}(e,t,r,s,o):o.map((function(n){return Ce(e,t,r,s,n,c)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,f,h)):h[0]+f+h[1]}function $e(e){return"["+Error.prototype.toString.call(e)+"]"}function Ce(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),nt(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=Fe(r)?ke(e,u.value,null):ke(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),Ve(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Ye(e){return Array.isArray(e)}function Je(e){return"boolean"==typeof e}function Fe(e){return null===e}function ze(e){return"number"==typeof e}function We(e){return"string"==typeof e}function Ve(e){return void 0===e}function Ke(e){return He(e)&&"[object RegExp]"===Ze(e)}function He(e){return"object"===babelHelpers.typeof(e)&&null!==e}function qe(e){return He(e)&&"[object Date]"===Ze(e)}function Xe(e){return He(e)&&("[object Error]"===Ze(e)||e instanceof Error)}function Ge(e){return"function"==typeof e}function Ze(e){return Object.prototype.toString.call(e)}function Qe(e){return e<10?"0"+e.toString(10):e.toString(10)}Le.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Le.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var et=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function tt(){var e=new Date,t=[Qe(e.getHours()),Qe(e.getMinutes()),Qe(e.getSeconds())].join(":");return[e.getDate(),et[e.getMonth()],t].join(" ")}function rt(e,t){if(!t||!He(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var it={inherits:De,_extend:rt,log:function(){console.log("%s - %s",tt(),Ue.apply(null,arguments))},isBuffer:function(e){return Buffer.isBuffer(e)},isPrimitive:function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===babelHelpers.typeof(e)||void 0===e},isFunction:Ge,isError:Xe,isDate:qe,isObject:He,isRegExp:Ke,isUndefined:Ve,isSymbol:function(e){return"symbol"===babelHelpers.typeof(e)},isString:We,isNumber:ze,isNullOrUndefined:function(e){return null==e},isNull:Fe,isBoolean:Je,isArray:Ye,inspect:Le,deprecate:function e(t,r){if(Ve(global.process))return function(){return e(t,r).apply(this,arguments)};var n=!1;return function(){return n||(console.error(r),n=!0),t.apply(this,arguments)}},format:Ue,debuglog:function(e){if(Ve(Re)&&(Re=""),e=e.toUpperCase(),!je[e])if(new RegExp("\\b"+e+"\\b","i").test(Re)){je[e]=function(){var t=Ue.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else je[e]=function(){};return je[e]}},ot=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deprecate=t.isObjectLike=t.isDate=t.isBuffer=t.haveBuffer=t.isBigUInt64Array=t.isBigInt64Array=t.isUint8Array=t.randomBytes=t.normalizedFunctionString=void 0,t.normalizedFunctionString=function(e){return e.toString().replace("function(","function (")};var r="object"==typeof he.navigator&&"ReactNative"===he.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.",n=function(e){console.warn(r);for(var t=Te.Buffer.alloc(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t};function i(e){return"object"==typeof e&&null!==e}t.randomBytes=function(){if("undefined"!=typeof window){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(t){return e.getRandomValues(Te.Buffer.alloc(t))}}if(void 0!==he&&he.crypto&&he.crypto.getRandomValues)return function(e){return he.crypto.getRandomValues(Te.Buffer.alloc(e))};var t;try{t=Ie.randomBytes}catch(r){}return t||n}(),t.isUint8Array=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},t.isBigInt64Array=function(e){return"[object BigInt64Array]"===Object.prototype.toString.call(e)},t.isBigUInt64Array=function(e){return"[object BigUint64Array]"===Object.prototype.toString.call(e)},t.haveBuffer=function(){return void 0!==he&&void 0!==he.Buffer},t.isBuffer=function(e){var t;return"object"==typeof e&&"Buffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)},t.isDate=function(e){return i(e)&&"[object Date]"===Object.prototype.toString.call(e)},t.isObjectLike=i,t.deprecate=function(e,t){if("undefined"==typeof window&&"undefined"==typeof self)return it.deprecate(e,t);var r=!1;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r||(console.warn(t),r=!0),e.apply(this,n)}}}));le(ot),ot.deprecate,ot.isObjectLike,ot.isDate,ot.isBuffer,ot.haveBuffer,ot.isBigUInt64Array,ot.isBigInt64Array,ot.isUint8Array,ot.randomBytes,ot.normalizedFunctionString;var st=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureBuffer=void 0,t.ensureBuffer=function(e){if(ot.isBuffer(e))return e;if(ArrayBuffer.isView(e))return Te.Buffer.from(e.buffer);if(e instanceof ArrayBuffer)return Te.Buffer.from(e);throw new TypeError("Must use either Buffer or TypedArray")}}));le(st),st.ensureBuffer;var at=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToUuidHexString=t.uuidHexStringToBuffer=t.uuidValidateString=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i;t.uuidValidateString=function(e){return"string"==typeof e&&r.test(e)};t.uuidHexStringToBuffer=function(e){if(!t.uuidValidateString(e))throw new TypeError('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var r=e.replace(/-/g,"");return Te.Buffer.from(r,"hex")};t.bufferToUuidHexString=function(e,t){return void 0===t&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")}}));le(at),at.bufferToUuidHexString,at.uuidHexStringToBuffer,at.uuidValidateString;var ut=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UUID=void 0;var r=Symbol("id"),n=function(){function e(t){if(void 0===t)this.id=e.generate();else if(t instanceof e)this[r]=Te.Buffer.from(t.id),this.__id=t.__id;else if((Te.Buffer.isBuffer(t)||ArrayBuffer.isView(t))&&16===t.byteLength)this.id=st.ensureBuffer(t);else{if("string"!=typeof t)throw new TypeError("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");this.id=at.uuidHexStringToBuffer(t)}}return Object.defineProperty(e.prototype,"id",{get:function(){return this[r]},set:function(t){this[r]=t,e.cacheHexString&&(this.__id=at.bufferToUuidHexString(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(void 0===t&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var r=at.bufferToUuidHexString(this.id,t);return e.cacheHexString&&(this.__id=r),r},e.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch(r){return!1}},e.prototype.toBinary=function(){return new ft.Binary(this.id,ft.Binary.SUBTYPE_UUID)},e.generate=function(){var e=ot.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,Te.Buffer.from(e)},e.isValid=function(t){if(!t)return!1;if(t instanceof e)return!0;if("string"==typeof t)return at.uuidValidateString(t);if(Te.Buffer.isBuffer(t)){if(16!==t.length)return!1;try{return parseInt(t[6].toString(16)[0],10)===ft.Binary.SUBTYPE_UUID}catch(r){return!1}}return!1},e.createFromHexString=function(t){return new e(at.uuidHexStringToBuffer(t))},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'+this.toHexString()+'")'},e}();t.UUID=n,Object.defineProperty(n.prototype,"_bsontype",{value:"UUID"})}));le(ut),ut.UUID;var ft=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Binary=void 0;var r=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(!(null==t||"string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||Array.isArray(t)))throw new TypeError("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=r?r:e.BSON_BINARY_SUBTYPE_DEFAULT,null==t?(this.buffer=Te.Buffer.alloc(e.BUFFER_SIZE),this.position=0):("string"==typeof t?this.buffer=Te.Buffer.from(t,"binary"):Array.isArray(t)?this.buffer=Te.Buffer.from(t):this.buffer=st.ensureBuffer(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if("string"==typeof t&&1!==t.length)throw new TypeError("only accepts single character String");if("number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character Uint8Array or Array");var r;if((r="string"==typeof t?t.charCodeAt(0):"number"==typeof t?t:t[0])<0||r>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=Te.Buffer.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},e.prototype.write=function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=Te.Buffer.alloc(this.buffer.length+e.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r}ArrayBuffer.isView(e)?(this.buffer.set(st.ensureBuffer(e),t),this.position=t+e.byteLength>this.position?t+e.length:this.position):"string"==typeof e&&(this.buffer.write(e,t,e.length,"binary"),this.position=t+e.length>this.position?t+e.length:this.position)},e.prototype.read=function(e,t){return t=t&&t>0?t:this.position,this.buffer.slice(e,e+t)},e.prototype.value=function(e){return(e=!!e)&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(e){return this.buffer.toString(e)},e.prototype.toExtendedJSON=function(e){e=e||{};var t=this.buffer.toString("base64"),r=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===r.length?"0"+r:r}:{$binary:{base64:t,subType:1===r.length?"0"+r:r}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new ut.UUID(this.buffer.slice(0,this.position));throw new Error('Binary sub_type "'+this.sub_type+'" is not supported for converting to UUID. Only "'+e.SUBTYPE_UUID+'" is currently supported.')},e.fromExtendedJSON=function(t,r){var n,i;if(r=r||{},"$binary"in t?r.legacy&&"string"==typeof t.$binary&&"$type"in t?(i=t.$type?parseInt(t.$type,16):0,n=Te.Buffer.from(t.$binary,"base64")):"string"!=typeof t.$binary&&(i=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=Te.Buffer.from(t.$binary.base64,"base64")):"$uuid"in t&&(i=4,n=at.uuidHexStringToBuffer(t.$uuid)),!n)throw new TypeError("Unexpected Binary Extended JSON format "+JSON.stringify(t));return new e(n,i)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Binary(Buffer.from("'+this.value(!0).toString("hex")+'", "hex"), '+this.sub_type+")"},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_USER_DEFINED=128,e}();t.Binary=r,Object.defineProperty(r.prototype,"_bsontype",{value:"Binary"})}));le(ft),ft.Binary;var ct=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Code=void 0;var r=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var e=this.toJSON();return'new Code("'+e.code+'"'+(e.scope?", "+JSON.stringify(e.scope):"")+")"},e}();t.Code=r,Object.defineProperty(r.prototype,"_bsontype",{value:"Code"})}));le(ct),ct.Code;var ht=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DBRef=t.isDBRefLike=void 0,t.isDBRefLike=function(e){return ot.isObjectLike(e)&&null!=e.$id&&null!=e.$ref};var r=function(){function e(t,r,n,i){if(!(this instanceof e))return new e(t,r,n,i);var o=t.split(".");2===o.length&&(n=o.shift(),t=o.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=i||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e},e.prototype.toExtendedJSON=function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var e=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'+this.namespace+'", new ObjectId("'+e+'")'+(this.db?', "'+this.db+'"':"")+")"},e}();t.DBRef=r,Object.defineProperty(r.prototype,"_bsontype",{value:"DBRef"})}));le(ht),ht.DBRef,ht.isDBRefLike;var lt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Long=void 0;var r=void 0;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(f){}var n=4294967296,i=0x10000000000000000,o=i/2,s={},a={},u=function(){function e(t,r,n){if(void 0===t&&(t=0),void 0===r&&(r=0),!(this instanceof e))return new e(t,r,n);this.low=0|t,this.high=0|r,this.unsigned=!!n,Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,r,n){return new e(t,r,n)},e.fromInt=function(t,r){var n,i,o;return r?(o=0<=(t>>>=0)&&t<256)&&(i=a[t])?i:(n=e.fromBits(t,(0|t)<0?-1:0,!0),o&&(a[t]=n),n):(o=-128<=(t|=0)&&t<128)&&(i=s[t])?i:(n=e.fromBits(t,t<0?-1:0,!1),o&&(s[t]=n),n)},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=i)return e.MAX_UNSIGNED_VALUE}else{if(t<=-o)return e.MIN_VALUE;if(t+1>=o)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%n|0,t/n|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r?(n=r,r=!1):r=!!r,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return e.fromString(t.substring(1),r,n).neg();for(var o=e.fromNumber(Math.pow(n,8)),s=e.ZERO,a=0;a<t.length;a+=8){var u=Math.min(8,t.length-a),f=parseInt(t.substring(a,a+u),n);if(u<8){var c=e.fromNumber(Math.pow(n,u));s=s.mul(c).add(e.fromNumber(f))}else s=(s=s.mul(o)).add(e.fromNumber(f))}return s.unsigned=r,s},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(e){return ot.isObjectLike(e)&&!0===e.__isLong__},e.fromValue=function(t,r){return"number"==typeof t?e.fromNumber(t,r):"string"==typeof t?e.fromString(t,r):e.fromBits(t.low,t.high,"boolean"==typeof r?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,f=0,c=0,h=0,l=0;return h+=(l+=o+(65535&t.low))>>>16,l&=65535,c+=(h+=i+u)>>>16,h&=65535,f+=(c+=n+a)>>>16,c&=65535,f+=r+s,f&=65535,e.fromBits(h<<16|l,f<<16|c,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(e){return this.compare(e)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(r){if(!this.unsigned&&-2147483648===this.high&&-1===t.low&&-1===t.high)return this;var n=(this.unsigned?r.div_u:r.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(n,r.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var i,o,s;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;s=e.UZERO}else{if(this.eq(e.MIN_VALUE))return t.eq(e.ONE)||t.eq(e.NEG_ONE)?e.MIN_VALUE:t.eq(e.MIN_VALUE)?e.ONE:(i=this.shr(1).div(t).shl(1)).eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.sub(t.mul(i)),s=i.add(o.div(t)));if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=e.ZERO}for(o=this;o.gte(t);){i=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),u=a<=48?1:Math.pow(2,a-48),f=e.fromNumber(i),c=f.mul(t);c.isNegative()||c.gt(o);)i-=u,c=(f=e.fromNumber(i,this.unsigned)).mul(t);f.isZero()&&(f=e.ONE),s=s.add(f),o=o.sub(c)}return s},e.prototype.div=function(e){return this.divide(e)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},e.prototype.eq=function(e){return this.equals(e)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t,r=0!==this.high?this.high:this.low;for(t=31;t>0&&0==(r&1<<t);t--);return 0!==this.high?t+33:t+1},e.prototype.greaterThan=function(e){return this.comp(e)>0},e.prototype.gt=function(e){return this.greaterThan(e)},e.prototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},e.prototype.gte=function(e){return this.greaterThanOrEqual(e)},e.prototype.ge=function(e){return this.greaterThanOrEqual(e)},e.prototype.isEven=function(){return 0==(1&this.low)},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return 1==(1&this.low)},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return 0===this.high&&0===this.low},e.prototype.lessThan=function(e){return this.comp(e)<0},e.prototype.lt=function(e){return this.lessThan(e)},e.prototype.lessThanOrEqual=function(e){return this.comp(e)<=0},e.prototype.lte=function(e){return this.lessThanOrEqual(e)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),r){var n=(this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(n,r.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(e){return this.modulo(e)},e.prototype.rem=function(e){return this.modulo(e)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),r){var n=r.mul(this.low,this.high,t.low,t.high);return e.fromBits(n,r.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,o=65535&this.high,s=this.low>>>16,a=65535&this.low,u=t.high>>>16,f=65535&t.high,c=t.low>>>16,h=65535&t.low,l=0,p=0,d=0,y=0;return d+=(y+=a*h)>>>16,y&=65535,p+=(d+=s*h)>>>16,d&=65535,p+=(d+=a*c)>>>16,d&=65535,l+=(p+=o*h)>>>16,p&=65535,l+=(p+=s*c)>>>16,p&=65535,l+=(p+=a*f)>>>16,p&=65535,l+=i*h+o*c+s*f+a*u,l&=65535,e.fromBits(d<<16|y,l<<16|p,this.unsigned)},e.prototype.mul=function(e){return this.multiply(e)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(e){return!this.equals(e)},e.prototype.neq=function(e){return this.notEquals(e)},e.prototype.ne=function(e){return this.notEquals(e)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(e){return this.shiftLeft(e)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(e){return this.shiftRight(e)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),0===(t&=63))return this;var r=this.high;if(t<32){var n=this.low;return e.fromBits(n>>>t|r<<32-t,r>>>t,this.unsigned)}return 32===t?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(e){return this.shiftRightUnsigned(e)},e.prototype.shru=function(e){return this.shiftRightUnsigned(e)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(e){return this.subtract(e)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},e.prototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),n=this.div(r),i=n.mul(r).sub(this);return n.toString(t)+i.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=e.fromNumber(Math.pow(t,6),this.unsigned),s=this,a="";;){var u=s.div(o),f=(s.sub(u.mul(o)).toInt()>>>0).toString(t);if((s=u).isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(e){return this.lessThanOrEqual(e)},e.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'+this.toString()+'")'},e.TWO_PWR_24=e.fromInt(16777216),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();t.Long=u,Object.defineProperty(u.prototype,"__isLong__",{value:!0}),Object.defineProperty(u.prototype,"_bsontype",{value:"Long"})}));le(lt),lt.Long;var pt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decimal128=void 0;var r=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,n=/^(\+|-)?(Infinity|inf)$/i,i=/^(\+|-)?NaN$/i,o=6111,s=-6176,a=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),u=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),f=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),c=/^([-+])?(\d+)?$/;function h(e){return!isNaN(parseInt(e,10))}function l(e){var t=lt.Long.fromNumber(1e9),r=lt.Long.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new lt.Long(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function p(e,t){throw new TypeError('"'+e+'" is not a valid Decimal128 string - '+t)}var d=function(){function e(t){if(!(this instanceof e))return new e(t);this.bytes=t}return e.fromString=function(t){var l,d=!1,y=!1,g=!1,b=0,_=0,m=0,w=0,v=0,O=[0],S=0,B=0,N=0,A=0,E=0,T=0,I=new lt.Long(0,0),D=new lt.Long(0,0),x=0;if(t.length>=7e3)throw new TypeError(t+" not a valid Decimal128 string");var U=t.match(r),R=t.match(n),j=t.match(i);if(!U&&!R&&!j||0===t.length)throw new TypeError(t+" not a valid Decimal128 string");if(U){var L=U[2],P=U[4],M=U[5],k=U[6];P&&void 0===k&&p(t,"missing exponent power"),P&&void 0===L&&p(t,"missing exponent base"),void 0===P&&(M||k)&&p(t,"missing e before exponent")}if("+"!==t[x]&&"-"!==t[x]||(d="-"===t[x++]),!h(t[x])&&"."!==t[x]){if("i"===t[x]||"I"===t[x])return new e(Te.Buffer.from(d?u:f));if("N"===t[x])return new e(Te.Buffer.from(a))}for(;h(t[x])||"."===t[x];)"."!==t[x]?(S<34&&("0"!==t[x]||g)&&(g||(v=_),g=!0,O[B++]=parseInt(t[x],10),S+=1),g&&(m+=1),y&&(w+=1),_+=1,x+=1):(y&&p(t,"contains multiple periods"),y=!0,x+=1);if(y&&!_)throw new TypeError(t+" not a valid Decimal128 string");if("e"===t[x]||"E"===t[x]){var $=t.substr(++x).match(c);if(!$||!$[2])return new e(Te.Buffer.from(a));E=parseInt($[0],10),x+=$[0].length}if(t[x])return new e(Te.Buffer.from(a));if(N=0,S){if(A=S-1,1!==(b=m))for(;"0"===t[v+b-1];)b-=1}else N=0,A=0,O[0]=0,m=1,S=1,b=0;for(E<=w&&w-E>16384?E=s:E-=w;E>o;){if((A+=1)-N>34){if(O.join("").match(/^0+$/)){E=o;break}p(t,"overflow")}E-=1}for(;E<s||S<m;){if(0===A&&b<S){E=s,b=0;break}if(S<m?m-=1:A-=1,E<o)E+=1;else{if(O.join("").match(/^0+$/)){E=o;break}p(t,"overflow")}}if(A-N+1<b){var C=_;y&&(v+=1,C+=1),d&&(v+=1,C+=1);var Y=parseInt(t[v+A+1],10),J=0;if(Y>=5&&(J=1,5===Y))for(J=O[A]%2==1?1:0,T=v+A+2;T<C;T++)if(parseInt(t[T],10)){J=1;break}if(J)for(var F=A;F>=0;F--)if(++O[F]>9&&(O[F]=0,0===F)){if(!(E<o))return new e(Te.Buffer.from(d?u:f));E+=1,O[F]=1}}if(I=lt.Long.fromNumber(0),D=lt.Long.fromNumber(0),0===b)I=lt.Long.fromNumber(0),D=lt.Long.fromNumber(0);else if(A-N<17){F=N;for(D=lt.Long.fromNumber(O[F++]),I=new lt.Long(0,0);F<=A;F++)D=(D=D.multiply(lt.Long.fromNumber(10))).add(lt.Long.fromNumber(O[F]))}else{F=N;for(I=lt.Long.fromNumber(O[F++]);F<=A-17;F++)I=(I=I.multiply(lt.Long.fromNumber(10))).add(lt.Long.fromNumber(O[F]));for(D=lt.Long.fromNumber(O[F++]);F<=A;F++)D=(D=D.multiply(lt.Long.fromNumber(10))).add(lt.Long.fromNumber(O[F]))}var z,W,V,K,H=function(e,t){if(!e&&!t)return{high:lt.Long.fromNumber(0),low:lt.Long.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new lt.Long(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new lt.Long(t.getLowBits(),0),s=r.multiply(i),a=r.multiply(o),u=n.multiply(i),f=n.multiply(o);return s=s.add(a.shiftRightUnsigned(32)),a=new lt.Long(a.getLowBits(),0).add(u).add(f.shiftRightUnsigned(32)),{high:s=s.add(a.shiftRightUnsigned(32)),low:f=a.shiftLeft(32).add(new lt.Long(f.getLowBits(),0))}}(I,lt.Long.fromString("100000000000000000"));H.low=H.low.add(D),z=H.low,W=D,V=z.high>>>0,K=W.high>>>0,(V<K||V===K&&z.low>>>0<W.low>>>0)&&(H.high=H.high.add(lt.Long.fromNumber(1))),l=E+6176;var q={low:lt.Long.fromNumber(0),high:lt.Long.fromNumber(0)};H.high.shiftRightUnsigned(49).and(lt.Long.fromNumber(1)).equals(lt.Long.fromNumber(1))?(q.high=q.high.or(lt.Long.fromNumber(3).shiftLeft(61)),q.high=q.high.or(lt.Long.fromNumber(l).and(lt.Long.fromNumber(16383).shiftLeft(47))),q.high=q.high.or(H.high.and(lt.Long.fromNumber(0x7fffffffffff)))):(q.high=q.high.or(lt.Long.fromNumber(16383&l).shiftLeft(49)),q.high=q.high.or(H.high.and(lt.Long.fromNumber(562949953421311)))),q.low=H.low,d&&(q.high=q.high.or(lt.Long.fromString("9223372036854775808")));var X=Te.Buffer.alloc(16);return x=0,X[x++]=255&q.low.low,X[x++]=q.low.low>>8&255,X[x++]=q.low.low>>16&255,X[x++]=q.low.low>>24&255,X[x++]=255&q.low.high,X[x++]=q.low.high>>8&255,X[x++]=q.low.high>>16&255,X[x++]=q.low.high>>24&255,X[x++]=255&q.high.low,X[x++]=q.high.low>>8&255,X[x++]=q.high.low>>16&255,X[x++]=q.high.low>>24&255,X[x++]=255&q.high.high,X[x++]=q.high.high>>8&255,X[x++]=q.high.high>>16&255,X[x++]=q.high.high>>24&255,new e(X)},e.prototype.toString=function(){for(var e,t=0,r=new Array(36),n=0;n<r.length;n++)r[n]=0;var i,o,s,a=0,u=!1,f={parts:[0,0,0,0]},c=[];a=0;var h=this.bytes,p=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24,d=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24,y=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24,g=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24;a=0,{low:new lt.Long(p,d),high:new lt.Long(y,g)}.high.lessThan(lt.Long.ZERO)&&c.push("-");var b=g>>26&31;if(b>>3==3){if(30===b)return c.join("")+"Infinity";if(31===b)return"NaN";e=g>>15&16383,i=8+(g>>14&1)}else i=g>>14&7,e=g>>17&16383;var _=e-6176;if(f.parts[0]=(16383&g)+((15&i)<<14),f.parts[1]=y,f.parts[2]=d,f.parts[3]=p,0===f.parts[0]&&0===f.parts[1]&&0===f.parts[2]&&0===f.parts[3])u=!0;else for(s=3;s>=0;s--){var m=0,w=l(f);if(f=w.quotient,m=w.rem.low)for(o=8;o>=0;o--)r[9*s+o]=m%10,m=Math.floor(m/10)}if(u)t=1,r[a]=0;else for(t=36;!r[a];)t-=1,a+=1;var v=t-1+_;if(v>=34||v<=-7||_>0){if(t>34)return c.push("0"),_>0?c.push("E+"+_):_<0&&c.push("E"+_),c.join("");c.push(""+r[a++]),(t-=1)&&c.push(".");for(n=0;n<t;n++)c.push(""+r[a++]);c.push("E"),v>0?c.push("+"+v):c.push(""+v)}else if(_>=0)for(n=0;n<t;n++)c.push(""+r[a++]);else{var O=t+_;if(O>0)for(n=0;n<O;n++)c.push(""+r[a++]);else c.push("0");for(c.push(".");O++<0;)c.push("0");for(n=0;n<t-Math.max(O-1,0);n++)c.push(""+r[a++])}return c.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'Decimal128.fromString("'+this.toString()+'")'},e}();t.Decimal128=d,Object.defineProperty(d.prototype,"_bsontype",{value:"Decimal128"})}));le(pt),pt.Decimal128;var dt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Double=void 0;var r=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-"+this.value.toFixed(1)}:(Number.isInteger(this.value)?(t=this.value.toFixed(1)).length>=13&&(t=this.value.toExponential(13).toUpperCase()):t=this.value.toString(),{$numberDouble:t});var t},e.fromExtendedJSON=function(t,r){var n=parseFloat(t.$numberDouble);return r&&r.relaxed?n:new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Double("+this.toExtendedJSON().$numberDouble+")"},e}();t.Double=r,Object.defineProperty(r.prototype,"_bsontype",{value:"Double"})}));le(dt),dt.Double;var yt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Int32=void 0;var r=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32("+this.valueOf()+")"},e}();t.Int32=r,Object.defineProperty(r.prototype,"_bsontype",{value:"Int32"})}));le(yt),yt.Int32;var gt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaxKey=void 0;var r=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();t.MaxKey=r,Object.defineProperty(r.prototype,"_bsontype",{value:"MaxKey"})}));le(gt),gt.MaxKey;var bt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MinKey=void 0;var r=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();t.MinKey=r,Object.defineProperty(r.prototype,"_bsontype",{value:"MinKey"})}));le(bt),bt.MinKey;var _t=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectId=void 0;for(var r=ot.randomBytes(5),n=new RegExp("^[0-9a-fA-F]{24}$"),i=[],o=0;o<256;o++)i[o]=(o<=15?"0":"")+o.toString(16);for(var s=[],a=0;a<10;)s[48+a]=a++;for(;a<16;)s[55+a]=s[87+a]=a++;var u=Symbol("id"),f=function(){function e(t){if(!(this instanceof e))return new e(t);if(t instanceof e&&(this[u]=t.id,this.__id=t.__id),"object"==typeof t&&t&&"id"in t&&("toHexString"in t&&"function"==typeof t.toHexString?this[u]=Te.Buffer.from(t.toHexString(),"hex"):this[u]="string"==typeof t.id?Te.Buffer.from(t.id):t.id),null!=t&&"number"!=typeof t||(this[u]=e.generate("number"==typeof t?t:void 0),e.cacheHexString&&(this.__id=this.id.toString("hex"))),ArrayBuffer.isView(t)&&12===t.byteLength&&(this[u]=st.ensureBuffer(t)),"string"==typeof t)if(12===t.length){var r=Te.Buffer.from(t);12===r.byteLength&&(this[u]=r)}else{if(24!==t.length||!n.test(t))throw new TypeError("Argument passed in must be a Buffer or string of 12 bytes or a string of 24 hex characters");this[u]=Te.Buffer.from(t,"hex")}e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[u]},set:function(t){this[u]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(e){this.id.writeUInt32BE(e,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),i=Te.Buffer.alloc(12);return i.writeUInt32BE(t,0),i[4]=r[0],i[5]=r[1],i[6]=r[2],i[7]=r[3],i[8]=r[4],i[11]=255&n,i[10]=n>>8&255,i[9]=n>>16&255,i},e.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){return null!=t&&(t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&Te.Buffer.isBuffer(this.id)?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?Te.Buffer.from(t).equals(this.id):"object"==typeof t&&"toHexString"in t&&"function"==typeof t.toHexString&&t.toHexString()===this.toHexString())},e.prototype.getTimestamp=function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e},e.createPk=function(){return new e},e.createFromTime=function(t){var r=Te.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(Te.Buffer.from(t,"hex"))},e.isValid=function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&n.test(t):t instanceof e||(!(!Te.Buffer.isBuffer(t)||12!==t.length)||"object"==typeof t&&"toHexString"in t&&"function"==typeof t.toHexString&&("string"==typeof t.id?12===t.id.length:24===t.toHexString().length&&n.test(t.id.toString("hex"))))))},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'+this.toHexString()+'")'},e.index=~~(16777215*Math.random()),e}();t.ObjectId=f,Object.defineProperty(f.prototype,"generate",{value:ot.deprecate((function(e){return f.generate(e)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(f.prototype,"getInc",{value:ot.deprecate((function(){return f.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(f.prototype,"get_inc",{value:ot.deprecate((function(){return f.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(f,"get_inc",{value:ot.deprecate((function(){return f.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(f.prototype,"_bsontype",{value:"ObjectID"})}));le(_t),_t.ObjectId;var mt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BSONRegExp=void 0;var r=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.pattern=t,this.options=null!=r?r:"",this.options.split("").sort().join("");for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Error("The regular expression option ["+this.options[n]+"] is not supported")}return e.parseOptions=function(e){return e?e.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t){if("string"==typeof t.$regex)return new e(t.$regex,e.parseOptions(t.$options));if("BSONRegExp"===t.$regex._bsontype)return t}if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new TypeError("Unexpected BSONRegExp EJSON object form: "+JSON.stringify(t))},e}();t.BSONRegExp=r,Object.defineProperty(r.prototype,"_bsontype",{value:"BSONRegExp"})}));le(mt),mt.BSONRegExp;var wt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BSONSymbol=void 0;var r=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'+this.value+'")'},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();t.BSONSymbol=r,Object.defineProperty(r.prototype,"_bsontype",{value:"Symbol"})}));le(wt),wt.BSONSymbol;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var vt=function(e,t){return(vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var Ot=function(){return(Ot=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function St(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function Nt(e){return this instanceof Nt?(this.v=e,this):new Nt(e)}var At=Object.freeze({__proto__:null,__extends:function(e,t){function r(){this.constructor=e}vt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return Ot},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},__decorate:function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":babelHelpers.typeof(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":babelHelpers.typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(t){o(t)}}function a(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},__createBinding:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__exportStar:function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])},__values:St,__read:Bt,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Bt(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:Nt,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof Nt?Promise.resolve(r.value.v).then(u,f):c(o[0][2],r)}catch(n){c(o[0][3],n)}var r}function u(e){a("next",e)}function f(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:Nt(e[n](t)),done:"return"===n}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=St(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}}),Et=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.LongWithoutOverridesClass=void 0,t.LongWithoutOverridesClass=lt.Long;var r=function(e){function t(r,n){var i=this;return i instanceof t?(i=lt.Long.isLong(r)?e.call(this,r.low,r.high,!0)||this:e.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new t(r,n)}return At.__extends(t,e),t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(e){return new t(lt.Long.fromInt(e,!0))},t.fromNumber=function(e){return new t(lt.Long.fromNumber(e,!0))},t.fromBits=function(e,r){return new t(e,r)},t.fromString=function(e,r){return new t(lt.Long.fromString(e,!0,r))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(e){return new t(e.$timestamp.i,e.$timestamp.t)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp("+this.getLowBits().toString()+", "+this.getHighBits().toString()+")"},t.MAX_VALUE=lt.Long.MAX_UNSIGNED_VALUE,t}(t.LongWithoutOverridesClass);t.Timestamp=r}));le(Et),Et.Timestamp,Et.LongWithoutOverridesClass;var Tt=pe((function(e,t){function r(e){return ot.isObjectLike(e)&&Reflect.has(e,"_bsontype")&&"string"==typeof e._bsontype}Object.defineProperty(t,"__esModule",{value:!0}),t.EJSON=t.isBSONType=void 0,t.isBSONType=r;var n=2147483647,i=-2147483648,o=0x8000000000000000,s=-0x8000000000000000,a={$oid:_t.ObjectId,$binary:ft.Binary,$uuid:ft.Binary,$symbol:wt.BSONSymbol,$numberInt:yt.Int32,$numberDecimal:pt.Decimal128,$numberDouble:dt.Double,$numberLong:lt.Long,$minKey:bt.MinKey,$maxKey:gt.MaxKey,$regex:mt.BSONRegExp,$regularExpression:mt.BSONRegExp,$timestamp:Et.Timestamp};function u(e,t){if(void 0===t&&(t={}),"number"==typeof e){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=i&&e<=n)return new yt.Int32(e);if(e>=s&&e<=o)return lt.Long.fromNumber(e)}return new dt.Double(e)}if(null==e||"object"!=typeof e)return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter((function(t){return t.startsWith("$")&&null!=e[t]})),f=0;f<r.length;f++){var c=a[r[f]];if(c)return c.fromExtendedJSON(e,t)}if(null!=e.$date){var h=e.$date,l=new Date;return t.legacy?"number"==typeof h?l.setTime(h):"string"==typeof h&&l.setTime(Date.parse(h)):"string"==typeof h?l.setTime(Date.parse(h)):lt.Long.isLong(h)?l.setTime(h.toNumber()):"number"==typeof h&&t.relaxed&&l.setTime(h),l}if(null!=e.$code){var p=Object.assign({},e);return e.$scope&&(p.$scope=u(e.$scope)),ct.Code.fromExtendedJSON(e)}if(null!=e.$ref||null!=e.$dbPointer){var d=e.$ref?e:e.$dbPointer;if(d instanceof ht.DBRef)return d;var y=Object.keys(d).filter((function(e){return e.startsWith("$")})),g=!0;if(y.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(g=!1)})),g)return ht.DBRef.fromExtendedJSON(d)}return e}function f(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function c(e,t){if(Array.isArray(e))return function(e,t){return e.map((function(e){return c(e,t)}))}(e,t);if(void 0===e)return null;if(e instanceof Date){var a=e.getTime(),u=a>-1&&a<2534023188e5;return t.legacy?t.relaxed&&u?{$date:e.getTime()}:{$date:f(e)}:t.relaxed&&u?{$date:f(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var l=e>=s&&e<=o;if(e>=i&&e<=n)return{$numberInt:e.toString()};if(l)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var p=e.flags;if(void 0===p){var d=e.toString().match(/[gimuy]*$/);d&&(p=d[0])}return new mt.BSONRegExp(e.source,p).toExtendedJSON(t)}return null!=e&&"object"==typeof e?function(e,t){if(null==e||"object"!=typeof e)throw new Error("not an object instance");var n=e._bsontype;if(void 0===n){var i={};for(var o in e)i[o]=c(e[o],t);return i}if(r(e)){var s=e;if("function"!=typeof s.toExtendedJSON){var a=h[e._bsontype];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+e._bsontype);s=a(s)}return"Code"===n&&s.scope?s=new ct.Code(s.code,c(s.scope,t)):"DBRef"===n&&s.oid&&(s=new ht.DBRef(s.collection,c(s.oid,t),s.db,s.fields)),s.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+typeof n)}(e,t):e}var h={Binary:function(e){return new ft.Binary(e.value(),e.sub_type)},Code:function(e){return new ct.Code(e.code,e.scope)},DBRef:function(e){return new ht.DBRef(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new pt.Decimal128(e.bytes)},Double:function(e){return new dt.Double(e.value)},Int32:function(e){return new yt.Int32(e.value)},Long:function(e){return lt.Long.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new gt.MaxKey},MinKey:function(){return new bt.MinKey},ObjectID:function(e){return new _t.ObjectId(e)},ObjectId:function(e){return new _t.ObjectId(e)},BSONRegExp:function(e){return new mt.BSONRegExp(e.pattern,e.options)},Symbol:function(e){return new wt.BSONSymbol(e.value)},Timestamp:function(e){return Et.Timestamp.fromBits(e.low,e.high)}};!function(e){function t(e,t){var r=Object.assign({},{relaxed:!0,legacy:!1},t);return"boolean"==typeof r.relaxed&&(r.strict=!r.relaxed),"boolean"==typeof r.strict&&(r.relaxed=!r.strict),JSON.parse(e,(function(e,t){return u(t,r)}))}function r(e,t,r,n){null!=r&&"object"==typeof r&&(n=r,r=0),null==t||"object"!=typeof t||Array.isArray(t)||(n=t,t=void 0,r=0);var i=c(e,n=Object.assign({},{relaxed:!0,legacy:!1},n));return JSON.stringify(i,t,r)}e.parse=t,e.stringify=r,e.serialize=function(e,t){return t=t||{},JSON.parse(r(e,t))},e.deserialize=function(e,r){return r=r||{},t(JSON.stringify(e),r)}}(t.EJSON||(t.EJSON={}))}));le(Tt),Tt.EJSON,Tt.isBSONType;var It=pe((function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0,t.Map=r;var n=function(e){return e&&e.Math==Math&&e};var i=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof he&&he)||Function("return this")();Object.prototype.hasOwnProperty.call(i,"Map")?t.Map=r=i.Map:t.Map=r=function(){function e(e){void 0===e&&(e=[]),this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}}return e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},e.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?[r,e._values[r].v]:void 0,done:void 0===r}}}},e.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},e.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},e.prototype.has=function(e){return null!=this._values[e]},e.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},e.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},e.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?e._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}()}));le(It),It.Map;var Dt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BSON_BINARY_SUBTYPE_USER_DEFINED=t.BSON_BINARY_SUBTYPE_MD5=t.BSON_BINARY_SUBTYPE_UUID_NEW=t.BSON_BINARY_SUBTYPE_UUID=t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=t.BSON_BINARY_SUBTYPE_FUNCTION=t.BSON_BINARY_SUBTYPE_DEFAULT=t.BSON_DATA_MAX_KEY=t.BSON_DATA_MIN_KEY=t.BSON_DATA_DECIMAL128=t.BSON_DATA_LONG=t.BSON_DATA_TIMESTAMP=t.BSON_DATA_INT=t.BSON_DATA_CODE_W_SCOPE=t.BSON_DATA_SYMBOL=t.BSON_DATA_CODE=t.BSON_DATA_DBPOINTER=t.BSON_DATA_REGEXP=t.BSON_DATA_NULL=t.BSON_DATA_DATE=t.BSON_DATA_BOOLEAN=t.BSON_DATA_OID=t.BSON_DATA_UNDEFINED=t.BSON_DATA_BINARY=t.BSON_DATA_ARRAY=t.BSON_DATA_OBJECT=t.BSON_DATA_STRING=t.BSON_DATA_NUMBER=t.JS_INT_MIN=t.JS_INT_MAX=t.BSON_INT64_MIN=t.BSON_INT64_MAX=t.BSON_INT32_MIN=t.BSON_INT32_MAX=void 0,t.BSON_INT32_MAX=2147483647,t.BSON_INT32_MIN=-2147483648,t.BSON_INT64_MAX=Math.pow(2,63)-1,t.BSON_INT64_MIN=-Math.pow(2,63),t.JS_INT_MAX=Math.pow(2,53),t.JS_INT_MIN=-Math.pow(2,53),t.BSON_DATA_NUMBER=1,t.BSON_DATA_STRING=2,t.BSON_DATA_OBJECT=3,t.BSON_DATA_ARRAY=4,t.BSON_DATA_BINARY=5,t.BSON_DATA_UNDEFINED=6,t.BSON_DATA_OID=7,t.BSON_DATA_BOOLEAN=8,t.BSON_DATA_DATE=9,t.BSON_DATA_NULL=10,t.BSON_DATA_REGEXP=11,t.BSON_DATA_DBPOINTER=12,t.BSON_DATA_CODE=13,t.BSON_DATA_SYMBOL=14,t.BSON_DATA_CODE_W_SCOPE=15,t.BSON_DATA_INT=16,t.BSON_DATA_TIMESTAMP=17,t.BSON_DATA_LONG=18,t.BSON_DATA_DECIMAL128=19,t.BSON_DATA_MIN_KEY=255,t.BSON_DATA_MAX_KEY=127,t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BSON_BINARY_SUBTYPE_FUNCTION=1,t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,t.BSON_BINARY_SUBTYPE_UUID=3,t.BSON_BINARY_SUBTYPE_UUID_NEW=4,t.BSON_BINARY_SUBTYPE_MD5=5,t.BSON_BINARY_SUBTYPE_USER_DEFINED=128}));le(Dt),Dt.BSON_BINARY_SUBTYPE_USER_DEFINED,Dt.BSON_BINARY_SUBTYPE_MD5,Dt.BSON_BINARY_SUBTYPE_UUID_NEW,Dt.BSON_BINARY_SUBTYPE_UUID,Dt.BSON_BINARY_SUBTYPE_BYTE_ARRAY,Dt.BSON_BINARY_SUBTYPE_FUNCTION,Dt.BSON_BINARY_SUBTYPE_DEFAULT,Dt.BSON_DATA_MAX_KEY,Dt.BSON_DATA_MIN_KEY,Dt.BSON_DATA_DECIMAL128,Dt.BSON_DATA_LONG,Dt.BSON_DATA_TIMESTAMP,Dt.BSON_DATA_INT,Dt.BSON_DATA_CODE_W_SCOPE,Dt.BSON_DATA_SYMBOL,Dt.BSON_DATA_CODE,Dt.BSON_DATA_DBPOINTER,Dt.BSON_DATA_REGEXP,Dt.BSON_DATA_NULL,Dt.BSON_DATA_DATE,Dt.BSON_DATA_BOOLEAN,Dt.BSON_DATA_OID,Dt.BSON_DATA_UNDEFINED,Dt.BSON_DATA_BINARY,Dt.BSON_DATA_ARRAY,Dt.BSON_DATA_OBJECT,Dt.BSON_DATA_STRING,Dt.BSON_DATA_NUMBER,Dt.JS_INT_MIN,Dt.JS_INT_MAX,Dt.BSON_INT64_MIN,Dt.BSON_INT64_MAX,Dt.BSON_INT32_MIN,Dt.BSON_INT32_MAX;var xt=pe((function(e,t){function r(e,t,r){var i=5;if(Array.isArray(e))for(var o=0;o<e.length;o++)i+=n(o.toString(),e[o],t,!0,r);else for(var s in e.toBSON&&(e=e.toBSON()),e)i+=n(s,e[s],t,!1,r);return i}function n(e,t,n,i,o){switch(void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),t&&t.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+Te.Buffer.byteLength(e,"utf8")+1+4+Te.Buffer.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=Dt.JS_INT_MIN&&t<=Dt.JS_INT_MAX&&t>=Dt.BSON_INT32_MIN&&t<=Dt.BSON_INT32_MAX?(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+5:(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+9;case"undefined":return i||!o?(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t._bsontype||"ObjectID"===t._bsontype)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||ot.isDate(t))return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+9;if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+6+t.byteLength;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Te.Buffer.byteLength(t.code.toString(),"utf8")+1+r(t.scope,n,o):(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+4+Te.Buffer.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t._bsontype)return t.sub_type===ft.Binary.SUBTYPE_BYTE_ARRAY?(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t._bsontype)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+Te.Buffer.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t._bsontype){var s=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(s.$db=t.db),(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+r(s,n,o)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+Te.Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+Te.Buffer.byteLength(t.pattern,"utf8")+1+Te.Buffer.byteLength(t.options,"utf8")+1:(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+r(t,n,o)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+Te.Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Te.Buffer.byteLength(ot.normalizedFunctionString(t),"utf8")+1+r(t.scope,n,o);if(n)return(null!=e?Te.Buffer.byteLength(e,"utf8")+1:0)+1+4+Te.Buffer.byteLength(ot.normalizedFunctionString(t),"utf8")+1}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateObjectSize=void 0,t.calculateObjectSize=r}));le(xt),xt.calculateObjectSize;var Ut=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateUtf8=void 0;t.validateUtf8=function(e,t,r){for(var n=0,i=t;i<r;i+=1){var o=e[i];if(n){if(128!=(192&o))return!1;n-=1}else if(128&o)if(192==(224&o))n=1;else if(224==(240&o))n=2;else{if(240!=(248&o))return!1;n=3}}return!n}}));le(Ut),Ut.validateUtf8;var Rt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=void 0;var r=lt.Long.fromNumber(Dt.JS_INT_MAX),n=lt.Long.fromNumber(Dt.JS_INT_MIN),i={};function o(e,t,a,u){void 0===u&&(u=!1);var f=null!=a.evalFunctions&&a.evalFunctions,c=null!=a.cacheFunctions&&a.cacheFunctions,h=null==a.fieldsAsRaw?null:a.fieldsAsRaw,l=null!=a.raw&&a.raw,p="boolean"==typeof a.bsonRegExp&&a.bsonRegExp,d=null!=a.promoteBuffers&&a.promoteBuffers,y=null==a.promoteLongs||a.promoteLongs,g=null==a.promoteValues||a.promoteValues,b=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var _=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(_<5||_>e.length)throw new Error("corrupt bson message");for(var m=u?[]:{},w=0;;){var v=e[t++];if(0===v)break;for(var O=t;0!==e[O]&&O<e.length;)O++;if(O>=e.byteLength)throw new Error("Bad BSON Document: illegal CString");var S=u?w++:e.toString("utf8",t,O);if(t=O+1,v===Dt.BSON_DATA_STRING){if((K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||K>e.length-t||0!==e[t+K-1])throw new Error("bad string length in bson");if(!Ut.validateUtf8(e,t,t+K-1))throw new Error("Invalid UTF-8 string in BSON document");var B=e.toString("utf8",t,t+K-1);m[S]=B,t+=K}else if(v===Dt.BSON_DATA_OID){var N=Te.Buffer.alloc(12);e.copy(N,0,t,t+12),m[S]=new _t.ObjectId(N),t+=12}else if(v===Dt.BSON_DATA_INT&&!1===g)m[S]=new yt.Int32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(v===Dt.BSON_DATA_INT)m[S]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(v===Dt.BSON_DATA_NUMBER&&!1===g)m[S]=new dt.Double(e.readDoubleLE(t)),t+=8;else if(v===Dt.BSON_DATA_NUMBER)m[S]=e.readDoubleLE(t),t+=8;else if(v===Dt.BSON_DATA_DATE){var A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;m[S]=new Date(new lt.Long(A,E).toNumber())}else if(v===Dt.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");m[S]=1===e[t++]}else if(v===Dt.BSON_DATA_OBJECT){var T=t;if((W=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)<=0||W>e.length-t)throw new Error("bad embedded document length in bson");m[S]=l?e.slice(t,t+W):o(e,T,a,!1),t+=W}else if(v===Dt.BSON_DATA_ARRAY){T=t;var I=a,D=t+(W=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24);if(h&&h[S]){for(var x in I={},a)I[x]=a[x];I.raw=!0}if(m[S]=o(e,T,I,!0),0!==e[(t+=W)-1])throw new Error("invalid array terminator byte");if(t!==D)throw new Error("corrupted array bson")}else if(v===Dt.BSON_DATA_UNDEFINED)m[S]=void 0;else if(v===Dt.BSON_DATA_NULL)m[S]=null;else if(v===Dt.BSON_DATA_LONG){A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var U=new lt.Long(A,E);m[S]=y&&!0===g&&U.lessThanOrEqual(r)&&U.greaterThanOrEqual(n)?U.toNumber():U}else if(v===Dt.BSON_DATA_DECIMAL128){var R=Te.Buffer.alloc(16);e.copy(R,0,t,t+16),t+=16;var j=new pt.Decimal128(R);"toObject"in j&&"function"==typeof j.toObject?m[S]=j.toObject():m[S]=j}else if(v===Dt.BSON_DATA_BINARY){var L=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,P=L,M=e[t++];if(L<0)throw new Error("Negative binary type element size found");if(L>e.byteLength)throw new Error("Binary type size larger than document size");if(null!=e.slice){if(M===ft.Binary.SUBTYPE_BYTE_ARRAY){if((L=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(L>P-4)throw new Error("Binary type with subtype 0x02 contains too long binary size");if(L<P-4)throw new Error("Binary type with subtype 0x02 contains too short binary size")}m[S]=d&&g?e.slice(t,t+L):new ft.Binary(e.slice(t,t+L),M)}else{var k=Te.Buffer.alloc(L);if(M===ft.Binary.SUBTYPE_BYTE_ARRAY){if((L=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(L>P-4)throw new Error("Binary type with subtype 0x02 contains too long binary size");if(L<P-4)throw new Error("Binary type with subtype 0x02 contains too short binary size")}for(O=0;O<L;O++)k[O]=e[t+O];m[S]=d&&g?k:new ft.Binary(k,M)}t+=L}else if(v===Dt.BSON_DATA_REGEXP&&!1===p){for(O=t;0!==e[O]&&O<e.length;)O++;if(O>=e.length)throw new Error("Bad BSON Document: illegal CString");var $=e.toString("utf8",t,O);for(O=t=O+1;0!==e[O]&&O<e.length;)O++;if(O>=e.length)throw new Error("Bad BSON Document: illegal CString");var C=e.toString("utf8",t,O);t=O+1;var Y=new Array(C.length);for(O=0;O<C.length;O++)switch(C[O]){case"m":Y[O]="m";break;case"s":Y[O]="g";break;case"i":Y[O]="i"}m[S]=new RegExp($,Y.join(""))}else if(v===Dt.BSON_DATA_REGEXP&&!0===p){for(O=t;0!==e[O]&&O<e.length;)O++;if(O>=e.length)throw new Error("Bad BSON Document: illegal CString");$=e.toString("utf8",t,O);for(O=t=O+1;0!==e[O]&&O<e.length;)O++;if(O>=e.length)throw new Error("Bad BSON Document: illegal CString");C=e.toString("utf8",t,O);t=O+1,m[S]=new mt.BSONRegExp($,C)}else if(v===Dt.BSON_DATA_SYMBOL){if((K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||K>e.length-t||0!==e[t+K-1])throw new Error("bad string length in bson");var J=e.toString("utf8",t,t+K-1);m[S]=g?J:new wt.BSONSymbol(J),t+=K}else if(v===Dt.BSON_DATA_TIMESTAMP){A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;m[S]=new Et.Timestamp(A,E)}else if(v===Dt.BSON_DATA_MIN_KEY)m[S]=new bt.MinKey;else if(v===Dt.BSON_DATA_MAX_KEY)m[S]=new gt.MaxKey;else if(v===Dt.BSON_DATA_CODE){if((K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||K>e.length-t||0!==e[t+K-1])throw new Error("bad string length in bson");var F=e.toString("utf8",t,t+K-1);m[S]=f?c?s(F,i,m):s(F):new ct.Code(F),t+=K}else if(v===Dt.BSON_DATA_CODE_W_SCOPE){var z=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(z<13)throw new Error("code_w_scope total size shorter minimum expected length");if((K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||K>e.length-t||0!==e[t+K-1])throw new Error("bad string length in bson");F=e.toString("utf8",t,t+K-1),T=t+=K;var W=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,V=o(e,T,a,!1);if(t+=W,z<8+W+K)throw new Error("code_w_scope total size is too short, truncating scope");if(z>8+W+K)throw new Error("code_w_scope total size is too long, clips outer document");f?(m[S]=c?s(F,i,m):s(F),m[S].scope=V):m[S]=new ct.Code(F,V)}else{if(v!==Dt.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+v.toString(16)+' for fieldname "'+S+'"');var K;if((K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||K>e.length-t||0!==e[t+K-1])throw new Error("bad string length in bson");if(!Ut.validateUtf8(e,t,t+K-1))throw new Error("Invalid UTF-8 string in BSON document");var H=e.toString("utf8",t,t+K-1);t+=K;var q=Te.Buffer.alloc(12);e.copy(q,0,t,t+12);N=new _t.ObjectId(q);t+=12,m[S]=new ht.DBRef(H,N)}}if(_!==t-b){if(u)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var X=Object.keys(m).filter((function(e){return e.startsWith("$")})),G=!0;if(X.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(G=!1)})),!G)return m;if(ht.isDBRefLike(m)){var Z=Object.assign({},m);return delete Z.$ref,delete Z.$id,delete Z.$db,new ht.DBRef(m.$ref,m.$id,m.$db,Z)}return m}function s(e,t,r){return t?(null==t[e]&&(t[e]=new Function(e)),t[e].bind(r)):new Function(e)}t.deserialize=function(e,t,r){var n=(t=null==t?{}:t)&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5)throw new Error("bson size must be >= 5, is "+i);if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new Error("buffer length "+e.length+" must be >= bson size "+i);if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new Error("buffer length "+e.length+" must === bson size "+i);if(i+n>e.byteLength)throw new Error("(bson size "+i+" + options.index "+n+" must be <= buffer length "+e.byteLength+")");if(0!==e[n+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return o(e,n,t,r)}}));le(Rt),Rt.deserialize;var jt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.writeIEEE754=t.readIEEE754=void 0,t.readIEEE754=function(e,t,r,n,i){var o,s,a="big"===r,u=8*i-n-1,f=(1<<u)-1,c=f>>1,h=-7,l=a?0:i-1,p=a?1:-1,d=e[t+l];for(l+=p,o=d&(1<<-h)-1,d>>=-h,h+=u;h>0;o=256*o+e[t+l],l+=p,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+e[t+l],l+=p,h-=8);if(0===o)o=1-c;else{if(o===f)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},t.writeIEEE754=function(e,t,r,n,i,o){var s,a,u,f="big"===n,c=8*o-i-1,h=(1<<c)-1,l=h>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=f?o-1:0,y=f?-1:1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0)),isNaN(t)&&(a=0);i>=8;)e[r+d]=255&a,d+=y,a/=256,i-=8;for(s=s<<i|a,isNaN(t)&&(s+=8),c+=i;c>0;)e[r+d]=255&s,d+=y,s/=256,c-=8;e[r+d-y]|=128*g}}));le(jt),jt.writeIEEE754,jt.readIEEE754;var Lt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeInto=void 0;var r=/\x00/,n=new Set(["$db","$ref","$id","$clusterTime"]);function i(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function o(e,t,r,n,i){e[n++]=Dt.BSON_DATA_STRING;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");e[(n=n+o+1)-1]=0;var s=e.write(r,n+4,void 0,"utf8");return e[n+3]=s+1>>24&255,e[n+2]=s+1>>16&255,e[n+1]=s+1>>8&255,e[n]=s+1&255,n=n+4+s,e[n++]=0,n}function s(e,t,r,n,i){Number.isInteger(r)&&r>=Dt.BSON_INT32_MIN&&r<=Dt.BSON_INT32_MAX?(e[n++]=Dt.BSON_DATA_INT,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255):(e[n++]=Dt.BSON_DATA_NUMBER,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,jt.writeIEEE754(e,r,n,"little",52,8),n+=8);return n}function a(e,t,r,n,i){return e[n++]=Dt.BSON_DATA_NULL,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,n}function u(e,t,r,n,i){return e[n++]=Dt.BSON_DATA_BOOLEAN,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,e[n++]=r?1:0,n}function f(e,t,r,n,i){e[n++]=Dt.BSON_DATA_DATE,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var o=lt.Long.fromNumber(r.getTime()),s=o.getLowBits(),a=o.getHighBits();return e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&a,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,n}function c(e,t,n,i,o){if(e[i++]=Dt.BSON_DATA_REGEXP,i+=o?e.write(t,i,void 0,"ascii"):e.write(t,i,void 0,"utf8"),e[i++]=0,n.source&&null!=n.source.match(r))throw Error("value "+n.source+" must not contain null bytes");return i+=e.write(n.source,i,void 0,"utf8"),e[i++]=0,n.ignoreCase&&(e[i++]=105),n.global&&(e[i++]=115),n.multiline&&(e[i++]=109),e[i++]=0,i}function h(e,t,n,i,o){if(e[i++]=Dt.BSON_DATA_REGEXP,i+=o?e.write(t,i,void 0,"ascii"):e.write(t,i,void 0,"utf8"),e[i++]=0,null!=n.pattern.match(r))throw Error("pattern "+n.pattern+" must not contain null bytes");return i+=e.write(n.pattern,i,void 0,"utf8"),e[i++]=0,i+=e.write(n.options.split("").sort().join(""),i,void 0,"utf8"),e[i++]=0,i}function l(e,t,r,n,i){return null===r?e[n++]=Dt.BSON_DATA_NULL:"MinKey"===r._bsontype?e[n++]=Dt.BSON_DATA_MIN_KEY:e[n++]=Dt.BSON_DATA_MAX_KEY,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,n}function p(e,t,r,n,i){if(e[n++]=Dt.BSON_DATA_OID,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,"string"==typeof r.id)e.write(r.id,n,void 0,"binary");else{if(!r.id||!r.id.copy)throw new TypeError("object ["+JSON.stringify(r)+"] is not a valid ObjectId");r.id.copy(e,n,0,12)}return n+12}function d(e,t,r,n,i){e[n++]=Dt.BSON_DATA_BINARY,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=Dt.BSON_BINARY_SUBTYPE_DEFAULT,e.set(st.ensureBuffer(r),n),n+=o}function y(e,t,r,n,i,o,s,a,u,f){void 0===i&&(i=!1),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===u&&(u=!1),void 0===f&&(f=[]);for(var c=0;c<f.length;c++)if(f[c]===r)throw new Error("cyclic dependency detected");f.push(r),e[n++]=Array.isArray(r)?Dt.BSON_DATA_ARRAY:Dt.BSON_DATA_OBJECT,n+=u?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var h=N(e,r,i,n,o+1,s,a,f);return f.pop(),h}function g(e,t,r,n,i){return e[n++]=Dt.BSON_DATA_DECIMAL128,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,r.bytes.copy(e,n,0,16),n+16}function b(e,t,r,n,i){e[n++]="Long"===r._bsontype?Dt.BSON_DATA_LONG:Dt.BSON_DATA_TIMESTAMP,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var o=r.getLowBits(),s=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,n}function _(e,t,r,n,i){return r=r.valueOf(),e[n++]=Dt.BSON_DATA_INT,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n}function m(e,t,r,n,i){return e[n++]=Dt.BSON_DATA_NUMBER,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0,jt.writeIEEE754(e,r.value,n,"little",52,8),n+=8}function w(e,t,r,n,i,o,s){e[n++]=Dt.BSON_DATA_CODE,n+=s?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var a=ot.normalizedFunctionString(r),u=e.write(a,n+4,void 0,"utf8")+1;return e[n]=255&u,e[n+1]=u>>8&255,e[n+2]=u>>16&255,e[n+3]=u>>24&255,n=n+4+u-1,e[n++]=0,n}function v(e,t,r,n,i,o,s,a,u){if(void 0===i&&(i=!1),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===u&&(u=!1),r.scope&&"object"==typeof r.scope){e[n++]=Dt.BSON_DATA_CODE_W_SCOPE,n+=u?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var f=n,c="string"==typeof r.code?r.code:r.code.toString();n+=4;var h=e.write(c,n+4,void 0,"utf8")+1;e[n]=255&h,e[n+1]=h>>8&255,e[n+2]=h>>16&255,e[n+3]=h>>24&255,e[n+4+h-1]=0,n=n+h+4;var l=N(e,r.scope,i,n,o+1,s,a);n=l-1;var p=l-f;e[f++]=255&p,e[f++]=p>>8&255,e[f++]=p>>16&255,e[f++]=p>>24&255,e[n++]=0}else{e[n++]=Dt.BSON_DATA_CODE,n+=u?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;c=r.code.toString();var d=e.write(c,n+4,void 0,"utf8")+1;e[n]=255&d,e[n+1]=d>>8&255,e[n+2]=d>>16&255,e[n+3]=d>>24&255,n=n+4+d-1,e[n++]=0}return n}function O(e,t,r,n,i){e[n++]=Dt.BSON_DATA_BINARY,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var o=r.value(!0),s=r.position;return r.sub_type===ft.Binary.SUBTYPE_BYTE_ARRAY&&(s+=4),e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=r.sub_type,r.sub_type===ft.Binary.SUBTYPE_BYTE_ARRAY&&(s-=4,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255),e.set(o,n),n+=r.position}function S(e,t,r,n,i){e[n++]=Dt.BSON_DATA_SYMBOL,n+=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var o=e.write(r.value,n+4,void 0,"utf8")+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n}function B(e,t,r,n,i,o,s){e[n++]=Dt.BSON_DATA_OBJECT,n+=s?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8"),e[n++]=0;var a=n,u={$ref:r.collection||r.namespace,$id:r.oid};null!=r.db&&(u.$db=r.db);var f=N(e,u=Object.assign(u,r.fields),!1,n,i+1,o),c=f-a;return e[a++]=255&c,e[a++]=c>>8&255,e[a++]=c>>16&255,e[a++]=c>>24&255,f}function N(e,t,N,A,E,T,I,D){void 0===N&&(N=!1),void 0===A&&(A=0),void 0===E&&(E=0),void 0===T&&(T=!1),void 0===I&&(I=!0),void 0===D&&(D=[]),A=A||0,(D=D||[]).push(t);var x=A+4;if(Array.isArray(t))for(var U=0;U<t.length;U++){var R=""+U;if((k=t[U])&&k.toBSON){if("function"!=typeof k.toBSON)throw new TypeError("toBSON is not a function");k=k.toBSON()}if("string"==typeof k)x=o(e,R,k,x,!0);else if("number"==typeof k)x=s(e,R,k,x,!0);else{if("bigint"==typeof k)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"==typeof k)x=u(e,R,k,x,!0);else if(k instanceof Date||ot.isDate(k))x=f(e,R,k,x,!0);else if(void 0===k)x=a(e,R,0,x,!0);else if(null===k)x=a(e,R,0,x,!0);else if("ObjectId"===k._bsontype||"ObjectID"===k._bsontype)x=p(e,R,k,x,!0);else if(ot.isBuffer(k)||ot.isUint8Array(k))x=d(e,R,k,x,!0);else if(k instanceof RegExp||i(k))x=c(e,R,k,x,!0);else if("object"==typeof k&&null==k._bsontype)x=y(e,R,k,x,N,E,T,I,!0,D);else if("object"==typeof k&&Tt.isBSONType(k)&&"Decimal128"===k._bsontype)x=g(e,R,k,x,!0);else if("Long"===k._bsontype||"Timestamp"===k._bsontype)x=b(e,R,k,x,!0);else if("Double"===k._bsontype)x=m(e,R,k,x,!0);else if("function"==typeof k&&T)x=w(e,R,k,x,0,0,!0);else if("Code"===k._bsontype)x=v(e,R,k,x,N,E,T,I,!0);else if("Binary"===k._bsontype)x=O(e,R,k,x,!0);else if("Symbol"===k._bsontype)x=S(e,R,k,x,!0);else if("DBRef"===k._bsontype)x=B(e,R,k,x,E,T,!0);else if("BSONRegExp"===k._bsontype)x=h(e,R,k,x,!0);else if("Int32"===k._bsontype)x=_(e,R,k,x,!0);else if("MinKey"===k._bsontype||"MaxKey"===k._bsontype)x=l(e,R,k,x,!0);else if(void 0!==k._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+k._bsontype)}}else if(t instanceof It.Map)for(var j=t.entries(),L=!1;!L;){var P=j.next();if(!(L=!!P.done)){R=P.value[0];var M=typeof(k=P.value[1]);if("string"==typeof R&&!n.has(R)){if(null!=R.match(r))throw Error("key "+R+" must not contain null bytes");if(N){if("$"===R[0])throw Error("key "+R+" must not start with '$'");if(~R.indexOf("."))throw Error("key "+R+" must not contain '.'")}}if("string"===M)x=o(e,R,k,x);else if("number"===M)x=s(e,R,k,x);else{if("bigint"===M||ot.isBigInt64Array(k)||ot.isBigUInt64Array(k))throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===M)x=u(e,R,k,x);else if(k instanceof Date||ot.isDate(k))x=f(e,R,k,x);else if(null===k||void 0===k&&!1===I)x=a(e,R,0,x);else if("ObjectId"===k._bsontype||"ObjectID"===k._bsontype)x=p(e,R,k,x);else if(ot.isBuffer(k)||ot.isUint8Array(k))x=d(e,R,k,x);else if(k instanceof RegExp||i(k))x=c(e,R,k,x);else if("object"===M&&null==k._bsontype)x=y(e,R,k,x,N,E,T,I,!1,D);else if("object"===M&&"Decimal128"===k._bsontype)x=g(e,R,k,x);else if("Long"===k._bsontype||"Timestamp"===k._bsontype)x=b(e,R,k,x);else if("Double"===k._bsontype)x=m(e,R,k,x);else if("Code"===k._bsontype)x=v(e,R,k,x,N,E,T,I);else if("function"==typeof k&&T)x=w(e,R,k,x,0,0,T);else if("Binary"===k._bsontype)x=O(e,R,k,x);else if("Symbol"===k._bsontype)x=S(e,R,k,x);else if("DBRef"===k._bsontype)x=B(e,R,k,x,E,T);else if("BSONRegExp"===k._bsontype)x=h(e,R,k,x);else if("Int32"===k._bsontype)x=_(e,R,k,x);else if("MinKey"===k._bsontype||"MaxKey"===k._bsontype)x=l(e,R,k,x);else if(void 0!==k._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+k._bsontype)}}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!=typeof t)throw new TypeError("toBSON function did not return an object")}for(var R in t){var k;if((k=t[R])&&k.toBSON){if("function"!=typeof k.toBSON)throw new TypeError("toBSON is not a function");k=k.toBSON()}M=typeof k;if("string"==typeof R&&!n.has(R)){if(null!=R.match(r))throw Error("key "+R+" must not contain null bytes");if(N){if("$"===R[0])throw Error("key "+R+" must not start with '$'");if(~R.indexOf("."))throw Error("key "+R+" must not contain '.'")}}if("string"===M)x=o(e,R,k,x);else if("number"===M)x=s(e,R,k,x);else{if("bigint"===M)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===M)x=u(e,R,k,x);else if(k instanceof Date||ot.isDate(k))x=f(e,R,k,x);else if(void 0===k)!1===I&&(x=a(e,R,0,x));else if(null===k)x=a(e,R,0,x);else if("ObjectId"===k._bsontype||"ObjectID"===k._bsontype)x=p(e,R,k,x);else if(ot.isBuffer(k)||ot.isUint8Array(k))x=d(e,R,k,x);else if(k instanceof RegExp||i(k))x=c(e,R,k,x);else if("object"===M&&null==k._bsontype)x=y(e,R,k,x,N,E,T,I,!1,D);else if("object"===M&&"Decimal128"===k._bsontype)x=g(e,R,k,x);else if("Long"===k._bsontype||"Timestamp"===k._bsontype)x=b(e,R,k,x);else if("Double"===k._bsontype)x=m(e,R,k,x);else if("Code"===k._bsontype)x=v(e,R,k,x,N,E,T,I);else if("function"==typeof k&&T)x=w(e,R,k,x,0,0,T);else if("Binary"===k._bsontype)x=O(e,R,k,x);else if("Symbol"===k._bsontype)x=S(e,R,k,x);else if("DBRef"===k._bsontype)x=B(e,R,k,x,E,T);else if("BSONRegExp"===k._bsontype)x=h(e,R,k,x);else if("Int32"===k._bsontype)x=_(e,R,k,x);else if("MinKey"===k._bsontype||"MaxKey"===k._bsontype)x=l(e,R,k,x);else if(void 0!==k._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+k._bsontype)}}}D.pop(),e[x++]=0;var $=x-A;return e[A++]=255&$,e[A++]=$>>8&255,e[A++]=$>>16&255,e[A++]=$>>24&255,x}t.serializeInto=N}));le(Lt),Lt.serializeInto;var Pt=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectID=t.Decimal128=t.BSONRegExp=t.MaxKey=t.MinKey=t.Int32=t.Double=t.Timestamp=t.Long=t.UUID=t.ObjectId=t.Binary=t.DBRef=t.BSONSymbol=t.Map=t.Code=t.LongWithoutOverridesClass=t.EJSON=t.BSON_INT64_MIN=t.BSON_INT64_MAX=t.BSON_INT32_MIN=t.BSON_INT32_MAX=t.BSON_DATA_UNDEFINED=t.BSON_DATA_TIMESTAMP=t.BSON_DATA_SYMBOL=t.BSON_DATA_STRING=t.BSON_DATA_REGEXP=t.BSON_DATA_OID=t.BSON_DATA_OBJECT=t.BSON_DATA_NUMBER=t.BSON_DATA_NULL=t.BSON_DATA_MIN_KEY=t.BSON_DATA_MAX_KEY=t.BSON_DATA_LONG=t.BSON_DATA_INT=t.BSON_DATA_DECIMAL128=t.BSON_DATA_DBPOINTER=t.BSON_DATA_DATE=t.BSON_DATA_CODE_W_SCOPE=t.BSON_DATA_CODE=t.BSON_DATA_BOOLEAN=t.BSON_DATA_BINARY=t.BSON_DATA_ARRAY=t.BSON_BINARY_SUBTYPE_UUID_NEW=t.BSON_BINARY_SUBTYPE_UUID=t.BSON_BINARY_SUBTYPE_USER_DEFINED=t.BSON_BINARY_SUBTYPE_MD5=t.BSON_BINARY_SUBTYPE_FUNCTION=t.BSON_BINARY_SUBTYPE_DEFAULT=t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=void 0,t.deserializeStream=t.calculateObjectSize=t.deserialize=t.serializeWithBufferAndIndex=t.serialize=t.setInternalBufferSize=void 0,Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return ft.Binary}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return ct.Code}}),Object.defineProperty(t,"DBRef",{enumerable:!0,get:function(){return ht.DBRef}}),Object.defineProperty(t,"Decimal128",{enumerable:!0,get:function(){return pt.Decimal128}}),Object.defineProperty(t,"Double",{enumerable:!0,get:function(){return dt.Double}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return yt.Int32}}),Object.defineProperty(t,"Long",{enumerable:!0,get:function(){return lt.Long}}),Object.defineProperty(t,"Map",{enumerable:!0,get:function(){return It.Map}}),Object.defineProperty(t,"MaxKey",{enumerable:!0,get:function(){return gt.MaxKey}}),Object.defineProperty(t,"MinKey",{enumerable:!0,get:function(){return bt.MinKey}}),Object.defineProperty(t,"ObjectId",{enumerable:!0,get:function(){return _t.ObjectId}}),Object.defineProperty(t,"ObjectID",{enumerable:!0,get:function(){return _t.ObjectId}}),Object.defineProperty(t,"BSONRegExp",{enumerable:!0,get:function(){return mt.BSONRegExp}}),Object.defineProperty(t,"BSONSymbol",{enumerable:!0,get:function(){return wt.BSONSymbol}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return Et.Timestamp}}),Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return ut.UUID}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_BYTE_ARRAY",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_BYTE_ARRAY}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_DEFAULT",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_DEFAULT}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_FUNCTION",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_FUNCTION}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_MD5",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_MD5}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_USER_DEFINED",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_USER_DEFINED}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_UUID",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_UUID}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_UUID_NEW",{enumerable:!0,get:function(){return Dt.BSON_BINARY_SUBTYPE_UUID_NEW}}),Object.defineProperty(t,"BSON_DATA_ARRAY",{enumerable:!0,get:function(){return Dt.BSON_DATA_ARRAY}}),Object.defineProperty(t,"BSON_DATA_BINARY",{enumerable:!0,get:function(){return Dt.BSON_DATA_BINARY}}),Object.defineProperty(t,"BSON_DATA_BOOLEAN",{enumerable:!0,get:function(){return Dt.BSON_DATA_BOOLEAN}}),Object.defineProperty(t,"BSON_DATA_CODE",{enumerable:!0,get:function(){return Dt.BSON_DATA_CODE}}),Object.defineProperty(t,"BSON_DATA_CODE_W_SCOPE",{enumerable:!0,get:function(){return Dt.BSON_DATA_CODE_W_SCOPE}}),Object.defineProperty(t,"BSON_DATA_DATE",{enumerable:!0,get:function(){return Dt.BSON_DATA_DATE}}),Object.defineProperty(t,"BSON_DATA_DBPOINTER",{enumerable:!0,get:function(){return Dt.BSON_DATA_DBPOINTER}}),Object.defineProperty(t,"BSON_DATA_DECIMAL128",{enumerable:!0,get:function(){return Dt.BSON_DATA_DECIMAL128}}),Object.defineProperty(t,"BSON_DATA_INT",{enumerable:!0,get:function(){return Dt.BSON_DATA_INT}}),Object.defineProperty(t,"BSON_DATA_LONG",{enumerable:!0,get:function(){return Dt.BSON_DATA_LONG}}),Object.defineProperty(t,"BSON_DATA_MAX_KEY",{enumerable:!0,get:function(){return Dt.BSON_DATA_MAX_KEY}}),Object.defineProperty(t,"BSON_DATA_MIN_KEY",{enumerable:!0,get:function(){return Dt.BSON_DATA_MIN_KEY}}),Object.defineProperty(t,"BSON_DATA_NULL",{enumerable:!0,get:function(){return Dt.BSON_DATA_NULL}}),Object.defineProperty(t,"BSON_DATA_NUMBER",{enumerable:!0,get:function(){return Dt.BSON_DATA_NUMBER}}),Object.defineProperty(t,"BSON_DATA_OBJECT",{enumerable:!0,get:function(){return Dt.BSON_DATA_OBJECT}}),Object.defineProperty(t,"BSON_DATA_OID",{enumerable:!0,get:function(){return Dt.BSON_DATA_OID}}),Object.defineProperty(t,"BSON_DATA_REGEXP",{enumerable:!0,get:function(){return Dt.BSON_DATA_REGEXP}}),Object.defineProperty(t,"BSON_DATA_STRING",{enumerable:!0,get:function(){return Dt.BSON_DATA_STRING}}),Object.defineProperty(t,"BSON_DATA_SYMBOL",{enumerable:!0,get:function(){return Dt.BSON_DATA_SYMBOL}}),Object.defineProperty(t,"BSON_DATA_TIMESTAMP",{enumerable:!0,get:function(){return Dt.BSON_DATA_TIMESTAMP}}),Object.defineProperty(t,"BSON_DATA_UNDEFINED",{enumerable:!0,get:function(){return Dt.BSON_DATA_UNDEFINED}}),Object.defineProperty(t,"BSON_INT32_MAX",{enumerable:!0,get:function(){return Dt.BSON_INT32_MAX}}),Object.defineProperty(t,"BSON_INT32_MIN",{enumerable:!0,get:function(){return Dt.BSON_INT32_MIN}}),Object.defineProperty(t,"BSON_INT64_MAX",{enumerable:!0,get:function(){return Dt.BSON_INT64_MAX}}),Object.defineProperty(t,"BSON_INT64_MIN",{enumerable:!0,get:function(){return Dt.BSON_INT64_MIN}});var r=Tt;Object.defineProperty(t,"EJSON",{enumerable:!0,get:function(){return r.EJSON}});var n=Et;Object.defineProperty(t,"LongWithoutOverridesClass",{enumerable:!0,get:function(){return n.LongWithoutOverridesClass}});var i=17825792,o=Te.Buffer.alloc(i);function s(e){o.length<e&&(o=Te.Buffer.alloc(e))}function a(e,t){void 0===t&&(t={});var r="boolean"==typeof t.checkKeys&&t.checkKeys,n="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,s="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,a="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:i;o.length<a&&(o=Te.Buffer.alloc(a));var u=Lt.serializeInto(o,e,r,0,0,n,s,[]),f=Te.Buffer.alloc(u);return o.copy(f,0,0,f.length),f}function u(e,t,r){void 0===r&&(r={});var n="boolean"==typeof r.checkKeys&&r.checkKeys,i="boolean"==typeof r.serializeFunctions&&r.serializeFunctions,s="boolean"!=typeof r.ignoreUndefined||r.ignoreUndefined,a="number"==typeof r.index?r.index:0,u=Lt.serializeInto(o,e,n,0,0,i,s);return o.copy(t,a,0,u),a+u-1}function f(e,t){return void 0===t&&(t={}),Rt.deserialize(st.ensureBuffer(e),t)}function c(e,t){void 0===t&&(t={});var r="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,n="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return xt.calculateObjectSize(e,r,n)}function h(e,t,r,n,i,o){for(var s=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},o),a=st.ensureBuffer(e),u=t,f=0;f<r;f++){var c=a[u]|a[u+1]<<8|a[u+2]<<16|a[u+3]<<24;s.index=u,n[i+f]=Rt.deserialize(a,s),u+=c}return u}t.setInternalBufferSize=s,t.serialize=a,t.serializeWithBufferAndIndex=u,t.deserialize=f,t.calculateObjectSize=c,t.deserializeStream=h;var l={Binary:ft.Binary,Code:ct.Code,DBRef:ht.DBRef,Decimal128:pt.Decimal128,Double:dt.Double,Int32:yt.Int32,Long:lt.Long,UUID:ut.UUID,Map:It.Map,MaxKey:gt.MaxKey,MinKey:bt.MinKey,ObjectId:_t.ObjectId,ObjectID:_t.ObjectId,BSONRegExp:mt.BSONRegExp,BSONSymbol:wt.BSONSymbol,Timestamp:Et.Timestamp,EJSON:Tt.EJSON,setInternalBufferSize:s,serialize:a,serializeWithBufferAndIndex:u,deserialize:f,calculateObjectSize:c,deserializeStream:h};t.default=l}));le(Pt),Pt.ObjectID,Pt.Decimal128,Pt.BSONRegExp,Pt.MaxKey,Pt.MinKey,Pt.Int32,Pt.Double,Pt.Timestamp,Pt.Long,Pt.UUID;var Mt=Pt.ObjectId;Pt.Binary,Pt.DBRef,Pt.BSONSymbol,Pt.Map,Pt.Code,Pt.LongWithoutOverridesClass;var kt=Pt.EJSON;Pt.BSON_INT64_MIN,Pt.BSON_INT64_MAX,Pt.BSON_INT32_MIN,Pt.BSON_INT32_MAX,Pt.BSON_DATA_UNDEFINED,Pt.BSON_DATA_TIMESTAMP,Pt.BSON_DATA_SYMBOL,Pt.BSON_DATA_STRING,Pt.BSON_DATA_REGEXP,Pt.BSON_DATA_OID,Pt.BSON_DATA_OBJECT,Pt.BSON_DATA_NUMBER,Pt.BSON_DATA_NULL,Pt.BSON_DATA_MIN_KEY,Pt.BSON_DATA_MAX_KEY,Pt.BSON_DATA_LONG,Pt.BSON_DATA_INT,Pt.BSON_DATA_DECIMAL128,Pt.BSON_DATA_DBPOINTER,Pt.BSON_DATA_DATE,Pt.BSON_DATA_CODE_W_SCOPE,Pt.BSON_DATA_CODE,Pt.BSON_DATA_BOOLEAN,Pt.BSON_DATA_BINARY,Pt.BSON_DATA_ARRAY,Pt.BSON_BINARY_SUBTYPE_UUID_NEW,Pt.BSON_BINARY_SUBTYPE_UUID,Pt.BSON_BINARY_SUBTYPE_USER_DEFINED,Pt.BSON_BINARY_SUBTYPE_MD5,Pt.BSON_BINARY_SUBTYPE_FUNCTION,Pt.BSON_BINARY_SUBTYPE_DEFAULT,Pt.BSON_BINARY_SUBTYPE_BYTE_ARRAY,Pt.deserializeStream,Pt.calculateObjectSize,Pt.deserialize,Pt.serializeWithBufferAndIndex,Pt.serialize,Pt.setInternalBufferSize;var $t=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},Ct=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},Yt=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},Jt=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Ft=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},zt=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Wt=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Vt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Kt(e){var t=function(e){return""!==e&&Wt.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new Jt;var i=n[1]&&n[1].split(/[._]/).slice(0,3);i?i.length<3&&(i=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}(i,function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length))):i=[];var o=i.join("."),s=function(e){for(var t=0,r=Vt.length;t<r;t++){var n=Vt[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=zt.exec(e);return a&&a[1]?new Yt(r,o,s,a[1]):new $t(r,o,s)}class Ht{constructor(){if(!Ht.fetch)throw new Error("DefaultNetworkTransport.fetch must be set before it's used");if(!Ht.AbortController)throw new Error("DefaultNetworkTransport.AbortController must be set before it's used")}fetchWithCallbacks(e,t){this.fetch(e).then((async e=>{const t=await e.text(),r={};return e.headers.forEach(((e,t)=>{r[t]=e})),{statusCode:e.status,headers:r,body:t}})).then((e=>t.onSuccess(e))).catch((e=>t.onError(e)))}async fetch(e){const{timeoutMs:t,url:r,...n}=e,{signal:i,cancelTimeout:o}=this.createTimeoutSignal(t);try{return await Ht.fetch(r,{signal:i,...n})}finally{o()}}createTimeoutSignal(e){if("number"==typeof e){const t=new Ht.AbortController,r=setTimeout((()=>{t.abort()}),e);return{signal:t.signal,cancelTimeout:()=>{clearTimeout(r)}}}return{signal:void 0,cancelTimeout:()=>{}}}}Ht.DEFAULT_HEADERS={"Content-Type":"application/json"},Ht.fetch=window.fetch.bind(window),Ht.AbortController=window.AbortController;var qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Xt,Gt,Zt=(function(e,t){var r;r="undefined"!=typeof self?self:"undefined"!=typeof window?window:qt,e.exports=function(t){var r,n=(t=t||{}).Base64,i="2.6.4",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(o),a=String.fromCharCode,u=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},f=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return e.replace(f,u)},h=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[o.charAt(r>>>18),o.charAt(r>>>12&63),t>=2?"=":o.charAt(r>>>6&63),t>=1?"=":o.charAt(63&r)].join("")},l=t.btoa&&"function"==typeof t.btoa?function(e){return t.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,h)},p=function(e){return l(c(String(e)))},d=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},y=function(e,t){return t?d(p(e)):p(e)},g=function(e){return y(e,!0)};t.Uint8Array&&(r=function(e,t){for(var r="",n=0,i=e.length;n<i;n+=3){var s=e[n],a=e[n+1],u=e[n+2],f=s<<16|a<<8|u;r+=o.charAt(f>>>18)+o.charAt(f>>>12&63)+(void 0!==a?o.charAt(f>>>6&63):"=")+(void 0!==u?o.charAt(63&f):"=")}return t?d(r):r});var b,_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,m=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(t>>>10))+a(56320+(1023&t));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},w=function(e){return e.replace(_,m)},v=function(e){var t=e.length,r=t%4,n=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[a(n>>>16),a(n>>>8&255),a(255&n)];return i.length-=[0,0,2,1][r],i.join("")},O=t.atob&&"function"==typeof t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/\S{1,4}/g,v)},S=function(e){return O(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},B=function(e){return w(O(e))},N=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(e){return B(N(e))};t.Uint8Array&&(b=function(e){return Uint8Array.from(S(N(e)),(function(e){return e.charCodeAt(0)}))});var E=function(){var e=t.Base64;return t.Base64=n,e};if(t.Base64={VERSION:i,atob:S,btoa:l,fromBase64:A,toBase64:y,utob:c,encode:y,encodeURI:g,btou:w,decode:A,noConflict:E,fromUint8Array:r,toUint8Array:b},"function"==typeof Object.defineProperty){var T=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",T((function(){return A(this)}))),Object.defineProperty(String.prototype,"toBase64",T((function(e){return y(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",T((function(){return y(this,!0)})))}}return t.Meteor&&(Base64=t.Base64),e.exports&&(e.exports.Base64=t.Base64),{Base64:t.Base64}}(r)}(Gt={path:Xt,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&Gt.path)}},Gt.exports),Gt.exports);const Qt={relaxed:!1};function er(e){return kt.serialize(e,Qt)}function tr(e){return Array.isArray(e)?e.map((e=>kt.deserialize(e))):kt.deserialize(e)}var rr,nr,ir,or;(nr=rr||(rr={})).Normal="normal",nr.Server="server",(or=ir||(ir={})).NAME="name",or.EMAIL="email",or.PICTURE="picture",or.FIRST_NAME="first_name",or.LAST_NAME="last_name",or.GENDER="gender",or.BIRTHDAY="birthday",or.MIN_AGE="min_age",or.MAX_AGE="max_age";const sr={[ir.NAME]:"name",[ir.EMAIL]:"email",[ir.PICTURE]:"pictureUrl",[ir.FIRST_NAME]:"firstName",[ir.LAST_NAME]:"lastName",[ir.GENDER]:"gender",[ir.BIRTHDAY]:"birthday",[ir.MIN_AGE]:"minAge",[ir.MAX_AGE]:"maxAge"};class ar{constructor(e){if(this.type=rr.Normal,this.identities=[],"object"==typeof e&&null!==e){const{type:t,identities:r,data:n}=e;if("string"!=typeof t)throw new Error("Expected 'type' in the response body");if(this.type=t,!Array.isArray(r))throw new Error("Expected 'identities' in the response body");if(this.identities=r.map((e=>({id:e.id,providerType:e.provider_type}))),"object"!=typeof n||null===n)throw new Error("Expected 'data' in the response body");{const e=Object.fromEntries(Object.entries(n).map((([e,t])=>e in sr?[sr[e],t]:[e,t])));this.data=tr(e)}}else this.data={}}}class ur{constructor(e,t){this.storage=e,this.keyPart=t}get(e){return this.storage.get(this.keyPart+ur.PART_SEPARATOR+e)}set(e,t){return this.storage.set(this.keyPart+ur.PART_SEPARATOR+e,t)}remove(e){return this.storage.remove(this.keyPart+ur.PART_SEPARATOR+e)}prefix(e){return new ur(this,e)}clear(e=""){return this.storage.clear(this.keyPart+ur.PART_SEPARATOR+e)}addListener(e){return this.storage.addListener(e)}removeListener(e){return this.storage.addListener(e)}}ur.PART_SEPARATOR=":";class fr extends ur{constructor(e,t){super(e,`user(${t})`)}get accessToken(){return this.get("accessToken")}set accessToken(e){null===e?this.remove("accessToken"):this.set("accessToken",e)}get refreshToken(){return this.get("refreshToken")}set refreshToken(e){null===e?this.remove("refreshToken"):this.set("refreshToken",e)}get profile(){const e=this.get("profile");if(e){const t=new ar;return Object.assign(t,JSON.parse(e)),t}}set profile(e){e?this.set("profile",JSON.stringify(e)):this.remove("profile")}get providerType(){const e=this.get("providerType");if(e)return e}set providerType(e){e?this.set("providerType",e):this.remove("providerType")}}function cr(e){return Object.fromEntries(Object.entries(e).filter((e=>void 0!==e[1])))}function hr(e,t=!0){const r=cr(e);return(t&&Object.keys(r).length>0?"?":"")+Object.entries(r).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}const lr=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];function pr(e){return function(e){for(const t of e)if("object"==typeof t)for(const[e,r]of Object.entries(t))void 0===r&&delete t[e];return e}(e).map((e=>"object"==typeof e?er(e):e))}class dr{constructor(e,t={}){this.fetcher=e,this.serviceName=t.serviceName,this.argsTransformation=t.argsTransformation||pr}static create(e,t={}){const r=new dr(e,t);return new Proxy(r,{get(e,t,r){if("string"==typeof t&&-1===lr.indexOf(t))return e.callFunction.bind(e,t);{const n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}}})}async callFunction(e,...t){const r={name:e,arguments:this.argsTransformation?this.argsTransformation(t):t};this.serviceName&&(r.service=this.serviceName);const n=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:n.functionsCall().path,body:r})}callFunctionStreaming(e,...t){const r={name:e,arguments:this.argsTransformation?this.argsTransformation(t):t};this.serviceName&&(r.service=this.serviceName);const n=this.fetcher.appRoute,i=hr({baas_request:Base64.encode(JSON.stringify(r))});return this.fetcher.fetchStream({method:"GET",path:n.functionsCall().path+i})}}class yr{constructor(e,t="local-userpass"){this.fetcher=e,this.providerName=t}async registerUser(e,t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).register().path,body:{email:e,password:t}})}async confirmUser(e,t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirm().path,body:{token:e,tokenId:t}})}async resendConfirmationEmail(e){const t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).confirmSend().path,body:{email:e}})}async resetPassword(e,t,r){const n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).reset().path,body:{token:e,tokenId:t,password:r}})}async sendResetPasswordEmail(e){const t=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:t.emailPasswordAuth(this.providerName).resetSend().path,body:{email:e}})}async callResetPasswordFunction(e,t,...r){const n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).resetCall().path,body:{email:e,password:t,arguments:r}})}}var gr={api:function(){return{path:"/api/client/v2.0",app(e){return{path:this.path+`/app/${e}`,location(){return{path:this.path+"/location"}},authProvider(e){return{path:this.path+`/auth/providers/${e}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(e){return{...this.authProvider(e),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(e){return{path:this.path+`/${e}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}}}}}}};class br{constructor(e,t="api-key"){this.fetcher=e}create(e){return this.fetcher.fetchJSON({method:"POST",body:{name:e},path:gr.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(e){return this.fetcher.fetchJSON({method:"GET",path:gr.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:gr.api().auth().apiKeys().path})}async delete(e){await this.fetcher.fetchJSON({method:"DELETE",path:gr.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}async enable(e){await this.fetcher.fetchJSON({method:"PUT",path:gr.api().auth().apiKeys().key(e).enable().path,tokenType:"refresh"})}async disable(e){await this.fetcher.fetchJSON({method:"PUT",path:gr.api().auth().apiKeys().key(e).disable().path,tokenType:"refresh"})}}let _r=null;function mr(){if(_r)return _r;throw new Error("Cannot get environment before it's set")}class wr extends Error{constructor({message:e,code:t}){super(e),this.name="WatchError",this.code=t}}var vr,Or;(Or=vr||(vr={})).NEED_DATA="NEED_DATA",Or.HAVE_EVENT="HAVE_EVENT",Or.HAVE_ERROR="HAVE_ERROR";class Sr{constructor(){this._state=vr.NEED_DATA,this._error=null,this._textDecoder=new(mr().TextDecoder),this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(e){this.assertState(vr.NEED_DATA),this._buffer+=this._textDecoder.decode(e,{stream:!0}),this.advanceBufferState()}feedLine(e){if(this.assertState(vr.NEED_DATA),e.endsWith("\n")&&(e=e.substr(0,e.length-1)),e.endsWith("\r")&&(e=e.substr(0,e.length-1)),0===e.length){if(0===this._dataBuffer.length)return void(this._eventType="");this._dataBuffer.endsWith("\n")&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(":"===e[0])return;const t=e.indexOf(":"),r=e.substr(0,t);let n=-1===t?"":e.substr(t+1);n.startsWith(" ")&&(n=n.substr(1)),"event"===r?this._eventType=n:"data"===r&&(this._dataBuffer+=n,this._dataBuffer+="\n")}feedSse(e){this.assertState(vr.NEED_DATA);const t=e.data.indexOf("%");if(-1!==t){let r="",n=0;for(let i=t;-1!==i;i=e.data.indexOf("%",n)){r+=e.data.substr(n,i-n);const t=e.data.substr(i,3);r+="%25"===t?"%":"%0A"===t?"\n":"%0D"===t?"\r":t,n=i+t.length}r+=e.data.substr(n),e.data=r}if(e.eventType&&"message"!==e.eventType){if("error"===e.eventType){this._state=vr.HAVE_ERROR,this._error=new wr({message:e.data,code:"unknown"});try{const{error_code:t,error:r}=kt.parse(e.data);if("string"!=typeof t)return;if("string"!=typeof r)return;this._error=new wr({message:r,code:t})}catch{return}}}else{try{const t=kt.parse(e.data);if("object"==typeof t)return this._nextEvent=t,void(this._state=vr.HAVE_EVENT)}catch{}this._state=vr.HAVE_ERROR,this._error=new wr({message:"server returned malformed event: "+e.data,code:"bad bson parse"})}}get state(){return this._state}nextEvent(){this.assertState(vr.HAVE_EVENT);const e=this._nextEvent;return this._state=vr.NEED_DATA,this.advanceBufferState(),e}get error(){return this._error}advanceBufferState(){for(this.assertState(vr.NEED_DATA);this.state===vr.NEED_DATA;){if(this._bufferOffset===this._buffer.length)return this._buffer="",void(this._bufferOffset=0);const e=this._buffer.indexOf("\n",this._bufferOffset);if(-1===e)return void(0!==this._bufferOffset&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0));this.feedLine(this._buffer.substr(this._bufferOffset,e-this._bufferOffset)),this._bufferOffset=e+1}}assertState(e){if(this._state!==e)throw Error(`Expected WatchStream to be in state ${e}, but in state ${this._state}`)}}class Br{constructor(e,t,r,n){this.functions=dr.create(e,{serviceName:t}),this.databaseName=r,this.collectionName=n,this.serviceName=t,this.fetcher=e}find(e={},t={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:e,project:t.projection,sort:t.sort,limit:t.limit})}findOne(e={},t={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:e,project:t.projection,sort:t.sort})}findOneAndUpdate(e={},t,r={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:e,update:t,sort:r.sort,projection:r.projection,upsert:r.upsert,returnNewDocument:r.returnNewDocument})}findOneAndReplace(e={},t,r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,update:t,sort:r.sort,projection:r.projection,upsert:r.upsert,returnNewDocument:r.returnNewDocument})}findOneAndDelete(e={},t={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,sort:t.sort,projection:t.projection})}aggregate(e){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:e})}count(e={},t={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:e,limit:t.limit})}insertOne(e){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:e})}insertMany(e){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:e})}deleteOne(e={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:e})}deleteMany(e={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:e})}updateOne(e,t,r={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:e,update:t,upsert:r.upsert})}updateMany(e,t,r={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:e,update:t,upsert:r.upsert})}async*watch({ids:e,filter:t}={}){const r=await this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:e,filter:t}),n=new Sr;for await(const i of r)if(i){for(n.feedBuffer(i);n.state==vr.HAVE_EVENT;)yield n.nextEvent();if(n.state==vr.HAVE_ERROR)throw n.error}}}function Nr(e,t,r,n){return new Br(e,t,r,n)}function Ar(e,t,r){return{collection:Nr.bind(null,e,t,r)}}var Er,Tr,Ir;(Tr=Er||(Er={})).Active="active",Tr.LoggedOut="logged-out",Tr.Removed="removed",function(e){e.Normal="normal",e.Server="server"}(Ir||(Ir={}));class Dr{constructor(e){if(this.app=e.app,this.id=e.id,this.storage=new fr(this.app.storage,this.id),"accessToken"in e&&"refreshToken"in e&&"providerType"in e)this._accessToken=e.accessToken,this._refreshToken=e.refreshToken,this.providerType=e.providerType,this.storage.accessToken=e.accessToken,this.storage.refreshToken=e.refreshToken,this.storage.providerType=e.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;const e=this.storage.providerType;if(this._profile=this.storage.profile,!e)throw new Error("Storage is missing a provider type");this.providerType=e}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new br(this.fetcher),this.functions=dr.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e,this.storage.accessToken=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e,this.storage.refreshToken=e}get state(){return this.id in this.app.allUsers?null===this.refreshToken?Er.LoggedOut:Er.Active:Er.Removed}get isLoggedIn(){return this.state===Er.Active}get customData(){if(this.accessToken){return this.decodeAccessToken().userData}throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){const e=this.accessToken.split(".")[1];if(e){const t=JSON.parse(Zt.Base64.decode(e)).baas_device_id;if("string"==typeof t&&"000000000000000000000000"!==t)return t}}return null}async refreshProfile(){const e=await this.fetcher.fetchJSON({method:"GET",path:gr.api().auth().profile().path});this._profile=new ar(e),this.storage.profile=this._profile}async logOut(){try{null!==this._refreshToken&&await this.fetcher.fetchJSON({method:"DELETE",path:gr.api().auth().session().path,tokenType:"refresh"})}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(e){const t=await this.app.authenticator.authenticate(e,this);if(this.id!==t.userId){const e=`got user id ${t.userId} expected ${this.id}`;throw new Error(`Link response ment for another user (${e})`)}this.accessToken=t.accessToken,await this.refreshProfile()}async refreshAccessToken(){const e=await this.fetcher.fetchJSON({method:"POST",path:gr.api().auth().session().path,tokenType:"refresh"}),{access_token:t}=e;if("string"!=typeof t)throw new Error("Expected an 'access_token' in the response");this.accessToken=t}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}callFunction(e,...t){return this.functions.callFunction(e,...t)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(e=""){throw new Error("Not yet implemented")}mongoClient(e){return function(e,t="mongo-db"){return{db:Ar.bind(null,e,t)}}(this.fetcher,e)}decodeAccessToken(){if(this.accessToken){const e=this.accessToken.split(".");if(3!==e.length)throw new Error("Expected an access token with three parts");const t=e[1],r=Zt.Base64.decode(t),n=JSON.parse(r),{exp:i,iat:o,sub:s,user_data:a={}}=n;if("number"!=typeof i)throw new Error("Failed to decode access token 'exp'");if("number"!=typeof o)throw new Error("Failed to decode access token 'iat'");return{expires:i,issuedAt:o,subject:s,userData:a}}throw new Error("Missing an access token")}}class xr{constructor(e,t,r){this.providerName=e,this.providerType=t,this.payload=r}static anonymous(){return new xr("anon-user","anon-user",{})}static userApiKey(e){return new xr("api-key","api-key",{key:e})}static serverApiKey(e){return new xr("api-key","api-key",{key:e})}static apiKey(e){return new xr("api-key","api-key",{key:e})}static emailPassword(e,t){return new xr("local-userpass","local-userpass",{username:e,password:t})}static function(e){return new xr("custom-function","custom-function",e)}static jwt(e){return new xr("custom-token","custom-token",{token:e})}static google(e){return new xr("oauth2-google","oauth2-google",xr.derivePayload(e))}static derivePayload(e){if("string"==typeof e){if(e.includes("://"))return this.derivePayload({redirectUrl:e});if(e.startsWith("4/"))return this.derivePayload({authCode:e});if(e.startsWith("ey"))return this.derivePayload({idToken:e});throw new Error(`Unexpected payload: ${e}`)}if(1===Object.keys(e).length){if("authCode"in e||"redirectUrl"in e)return e;if("idToken"in e)return{id_token:e.idToken};throw new Error("Unexpected payload: "+JSON.stringify(e))}throw new Error("Expected only one property in payload, got "+JSON.stringify(e))}static facebook(e){return new xr("oauth2-facebook","oauth2-facebook",e.includes("://")?{redirectUrl:e}:{accessToken:e})}static apple(e){return new xr("oauth2-apple","oauth2-apple",e.includes("://")?{redirectUrl:e}:{id_token:e})}}class Ur extends ur{constructor(e,t){super(e,`app(${t})`)}getUserIds(){const e=this.get("userIds"),t=e?JSON.parse(e):[];if(Array.isArray(t))return[...new Set(t)];throw new Error("Expected the user ids to be an array")}setUserIds(e,t){if(t){const t=this.getUserIds();for(const r of t)-1===e.indexOf(r)&&e.push(r)}this.set("userIds",JSON.stringify(e))}removeUserId(e){const t=this.getUserIds().filter((t=>t!==e));this.setUserIds(t,!1)}getDeviceId(){return this.get("deviceId")}setDeviceId(e){this.set("deviceId",e)}}const Rr={_stitch_client_app_id:"appId",_baas_client_app_id:"appId",_stitch_ua:"userAuth",_baas_ua:"userAuth",_stitch_link:"link",_baas_link:"link",_stitch_error:"error",_baas_error:"error",_stitch_state:"state",_baas_state:"state"};class jr{constructor(e,t=mr().openWindow){this.storage=e.prefix("oauth2"),this.openWindow=t}static parseRedirectLocation(e){const t=function(e){const t="?"===e[0]?e.substr(1):e;return Object.fromEntries(t.split("&").filter((e=>e.length>0)).map((e=>e.split("="))).map((([e,t])=>[e,decodeURIComponent(t)])))}(e),r={};for(const[n,i]of Object.entries(Rr)){const e=t[n];e&&(r[i]=e)}return r}static handleRedirect(e,t=mr().defaultStorage){const r=jr.parseRedirectLocation(e),{state:n,error:i}=r;if("string"!=typeof n)throw i?new Error(`Failed to handle OAuth 2.0 redirect: ${i}`):new Error("Failed to handle OAuth 2.0 redirect.");{const e=t.prefix("oauth2");jr.getStateStorage(e,n).set("result",JSON.stringify(r))}}static decodeAuthInfo(e){const t=(e||"").split("$");if(4===t.length){const[e,r,n,i]=t;return{accessToken:e,refreshToken:r,userId:n,deviceId:i}}throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(e,t){return e.prefix(`state(${t})`)}openWindowAndWaitForRedirect(e,t){const r=jr.getStateStorage(this.storage,t);return new Promise(((t,n)=>{let i,o=null;const s=()=>{const e=r.get("result");if(e){const a=JSON.parse(e);r.removeListener(s),r.clear();try{o&&(clearInterval(i),o.close())}catch(n){console.warn(`Failed closing redirect window: ${n}`)}finally{t(a)}}};r.addListener(s),o=this.openWindow(e),i=setInterval((()=>{if(o){if(o.closed){clearInterval(i),r.removeListener(s);const e=new Error("Window closed");n(e)}}else clearInterval(i)}),100)}))}generateState(){return function(e,t){let r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}(12,"abcdefghijklmnopqrstuvwxyz")}}class Lr{constructor(e,t,r){this.fetcher=e,this.oauth2=new jr(t),this.getDeviceInformation=r}async authenticate(e,t){const r=this.getDeviceInformation(),n="object"==typeof t;if(e.providerType.startsWith("oauth2")&&"string"==typeof e.payload.redirectUrl){const i=this.oauth2.generateState(),o=await this.getLogInUrl(e,n,{state:i,redirect:e.payload.redirectUrl,providerRedirectHeader:!!n||void 0,device:n?void 0:r.encode()});if(n){const e=(await this.fetcher.fetch({method:"GET",url:o,tokenType:n?"access":"none",user:t,mode:"cors",credentials:"include"})).headers.get("x-baas-location");if(e)return this.openWindowAndWaitForAuthResponse(e,i);throw new Error("Missing x-baas-location header")}return this.openWindowAndWaitForAuthResponse(o,i)}{const i=await this.getLogInUrl(e,n),o=await this.fetcher.fetchJSON({method:"POST",url:i,body:{...e.payload,options:{device:r.toJSON()}},tokenType:n?"access":"none",user:t}),{user_id:s,access_token:a,refresh_token:u=null,device_id:f}=o;if("string"!=typeof s)throw new Error("Expected a user id in the response");if("string"!=typeof a)throw new Error("Expected an access token in the response");return{userId:s,accessToken:a,refreshToken:u,deviceId:f}}}async getLogInUrl(e,t=!1,r={}){const n=this.fetcher.appRoute.authProvider(e.providerName).login(),i=hr({link:t?"true":void 0,...r});return await this.fetcher.locationUrl+n.path+i}async openWindowAndWaitForAuthResponse(e,t){const r=await this.oauth2.openWindowAndWaitForRedirect(e,t);return jr.decodeAuthInfo(r.userAuth)}}class Pr extends Error{constructor(e,t,r,n,i,o,s){const a=n?`status ${r} ${n}`:`status ${r}`;super("string"==typeof i?`Request failed (${e} ${t}): ${i} (${a})`:`Request failed (${e} ${t}): (${a})`),this.method=e,this.url=t,this.statusText=n,this.statusCode=r,this.error=i,this.errorCode=o,this.link=s}static async fromRequestAndResponse(e,t){var r;const{url:n,method:i}=e,{status:o,statusText:s}=t;if(null===(r=t.headers.get("content-type"))||void 0===r?void 0:r.startsWith("application/json")){const e=await t.json(),r=e.error||"No message",a=e.error_code,u=e.link;return new Pr(i,n,o,s,r,a,u)}return new Pr(i,n,o,s)}}class Mr{constructor({appId:e,transport:t,userContext:r,locationUrlContext:n}){this.appId=e,this.transport=t,this.userContext=r,this.locationUrlContext=n}static buildAuthorizationHeader(e,t){if(e&&"none"!==t){if("access"===t)return{Authorization:`Bearer ${e.accessToken}`};if("refresh"===t)return{Authorization:`Bearer ${e.refreshToken}`};throw new Error(`Unexpected token type (${t})`)}return{}}static buildBody(e){if(e){if("object"==typeof e&&null!==e)return JSON.stringify(er(e));if("string"==typeof e)return e;throw console.log("body is",e),new Error("Unexpected type of body")}}static buildJsonHeader(e){return e&&e.length>0?{"Content-Type":"application/json"}:{}}clone(e){return new Mr({appId:this.appId,transport:this.transport,userContext:this.userContext,locationUrlContext:this.locationUrlContext,...e})}async fetch(e){const{path:t,url:r,tokenType:n="access",user:i=this.userContext.currentUser,...o}=e;if("string"==typeof t&&"string"==typeof r)throw new Error("Use of 'url' and 'path' mutually exclusive");if("string"==typeof t){const r=await this.locationUrlContext.locationUrl+t;return this.fetch({...e,path:void 0,url:r})}if("string"==typeof r){const t=await this.transport.fetch({...o,url:r,headers:{...Mr.buildAuthorizationHeader(i,n),...e.headers}});if(t.ok)return t;if(i&&401===t.status&&"access"===n)return await i.refreshAccessToken(),this.fetch({...e,user:i});throw i&&401===t.status&&"refresh"===n&&(i.accessToken=null,i.refreshToken=null),await Pr.fromRequestAndResponse(e,t)}throw new Error("Expected either 'url' or 'path'")}async fetchJSON(e){const{body:t}=e,r=Mr.buildBody(t),n=Mr.buildJsonHeader(r),i=await this.fetch({...e,body:r,headers:{Accept:"application/json",...n,...e.headers}}),o=i.headers.get("content-type");if(null==o?void 0:o.startsWith("application/json")){return tr(await i.json())}if(null===o)return null;throw new Error(`Expected JSON response, got "${o}"`)}async fetchStream(e){const{body:t}=await this.fetch({...e,headers:{Accept:"text/event-stream",...e.headers}});return function(e){if("object"!=typeof e||null===e)throw new Error("Expected a non-null object");if(Symbol.asyncIterator in e)return e;if("getReader"in e){const t=e;return{[Symbol.asyncIterator](){const e=t.getReader();return{next:()=>e.read(),return:async()=>(await e.cancel(),{done:!0,value:null})}}}}throw new Error("Expected an AsyncIterable or a ReadableStream")}(t)}get appRoute(){return gr.api().app(this.appId)}get locationUrl(){return this.locationUrlContext.locationUrl}}var kr,$r;($r=kr||(kr={})).DEVICE_ID="deviceId",$r.APP_ID="appId",$r.APP_VERSION="appVersion",$r.PLATFORM="platform",$r.PLATFORM_VERSION="platformVersion",$r.SDK_VERSION="sdkVersion";class Cr{constructor({appId:e,appVersion:t,deviceId:r}){this.sdkVersion="1.2.1";const n=mr();this.platform=n.platform,this.platformVersion=n.platformVersion,this.appId=e,this.appVersion=t,this.deviceId=r}encode(){const e=cr(this);return Zt.Base64.encode(JSON.stringify(e))}toJSON(){return cr(this)}}class Yr{constructor(e){this.users=[],this._locationUrl=null;const t="string"==typeof e?{id:e}:e;if("object"!=typeof t||"string"!=typeof t.id)throw new Error("Missing a MongoDB Realm app-id");this.id=t.id,this.baseUrl=t.baseUrl||"https://stitch.mongodb.com",this.localApp=t.app;const{storage:r,transport:n=new Ht}=t;this.fetcher=new Mr({appId:this.id,userContext:this,locationUrlContext:this,transport:n}),this.emailPasswordAuth=new yr(this.fetcher);const i=r||mr().defaultStorage;this.storage=new Ur(i,this.id),this.authenticator=new Lr(this.fetcher,i,(()=>this.deviceInformation));try{this.hydrate()}catch(o){this.storage.clear(),console.warn("Realm app hydration failed:",o.message)}}static getApp(e){if(e in Yr.appCache)return Yr.appCache[e];{const t=new Yr(e);return Yr.appCache[e]=t,t}}switchUser(e){const t=this.users.findIndex((t=>t===e));if(-1===t)throw new Error("The user was never logged into this app");const[r]=this.users.splice(t,1);this.users.unshift(r)}async logIn(e,t=!0){const r=await this.authenticator.authenticate(e),n=this.createOrUpdateUser(r,e.providerType);this.switchUser(n),t&&await n.refreshProfile(),this.storage.setUserIds(this.users.map((e=>e.id)),!0);const i=r.deviceId;return i&&"000000000000000000000000"!==i&&this.storage.set("deviceId",i),n}async removeUser(e){const t=this.users.findIndex((t=>t===e));if(-1===t)throw new Error("The user was never logged into this app");this.users.splice(t,1),await e.logOut(),this.storage.remove(`user(${e.id}):profile`),this.storage.removeUserId(e.id)}get currentUser(){const e=this.users.filter((e=>e.state===Er.Active));return 0===e.length?null:e[0]}get allUsers(){return Object.fromEntries(this.users.map((e=>[e.id,e])))}get locationUrl(){if(!this._locationUrl){const e=gr.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+e,tokenType:"none"}).then((({hostname:e})=>{if("string"!=typeof e)throw new Error("Expected response to contain a 'hostname'");return e})).catch((e=>{throw this._locationUrl=null,e}))}return this._locationUrl}get deviceInformation(){const e=this.storage.getDeviceId(),t="string"==typeof e&&"000000000000000000000000"!==e?new Mt(e):void 0;return new Cr({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:t})}createOrUpdateUser(e,t){const r=this.users.find((t=>t.id===e.userId));if(r)return r.accessToken=e.accessToken,r.refreshToken=e.refreshToken,r;{if(!e.refreshToken)throw new Error("No refresh token in response from server");const r=new Dr({app:this,id:e.userId,accessToken:e.accessToken,refreshToken:e.refreshToken,providerType:t});return this.users.unshift(r),r}}hydrate(){const e=this.storage.getUserIds();this.users=e.map((e=>new Dr({app:this,id:e})))}}Yr.appCache={},Yr.Credentials=xr;const Jr=Fr?Kt(Fr):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Ft:"undefined"!=typeof navigator?Kt(navigator.userAgent):"undefined"!=typeof process&&process.version?new Ct(process.version.slice(1)):null;var Fr;const zr={defaultStorage:(new class{constructor(){if("object"!=typeof window)throw new Error("Cannot use LocalStorage without a global window object");this.window=window}get(e){return this.window.localStorage.getItem(e)}set(e,t){return this.window.localStorage.setItem(e,t)}remove(e){return this.window.localStorage.removeItem(e)}prefix(e){return new ur(this,e)}clear(e){const t=[];for(let r=0;r<this.window.localStorage.length;r++){const n=this.window.localStorage.key(r);!n||e&&!n.startsWith(e)||t.push(n)}for(const r of t)this.window.localStorage.removeItem(r)}addListener(e){return this.window.addEventListener("storage",e)}removeListener(e){return this.window.removeEventListener("storage",e)}}).prefix("realm-web"),openWindow:e=>window.open(e),platform:(null==Jr?void 0:Jr.name)||"web",platformVersion:(null==Jr?void 0:Jr.version)||"0.0.0",TextDecoder:TextDecoder};_r=zr;export{t as A,q as B,fe as C,f as D,g as E,I as F,l as G,w as H,h as I,i as J,u as K,ce as L,e as M,Yr as N,T as O,v as P,xr as Q,ae as S,S as a,O as b,B as c,d,y as e,p as f,N as g,E as h,se as i,te as j,_ as k,m as l,re as m,A as n,ne as o,Q as p,ee as q,Z as r,s,b as t,X as u,G as v,ie as w,L as x,j as y,R as z};
